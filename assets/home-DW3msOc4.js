import{r as l,j as p,F as Ie,a as Le}from"./react-N-_5-tx-.js";import{l as be,P as B}from"./vendor-RxfllKF0.js";import{u as de}from"./about-t0aR-emm.js";import{h as Pe,i as je,W as $e,N as ve,k as Re,A as Ne,v as le,P as Ee,w as Oe,x as ee,F as te,s as Te,q as oe,M as Be,V as De,r as Fe}from"./three-CFp4aWDs.js";import{g as He}from"./gsap-CH_iu5NA.js";import{t as Ce}from"./texture-system-BC_EEokD.js";import{C as Ve}from"./gallery-DuTYjaYN.js";class Ue{constructor(){this.activeResources=new Map,this.resourceCounter=0,this.isPageVisible=!document.hidden,this.lastActivityTime=Date.now(),this.initPageVisibilityListener(),this.initActivityListener()}initPageVisibilityListener(){typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isPageVisible=!document.hidden,this.isPageVisible&&(this.refreshActiveResources(),this.lastActivityTime=Date.now())})}initActivityListener(){if(typeof document<"u"){const e=()=>{this.lastActivityTime=Date.now()};document.addEventListener("mousemove",e,{passive:!0}),document.addEventListener("mousedown",e,{passive:!0}),document.addEventListener("keydown",e,{passive:!0}),document.addEventListener("scroll",e,{passive:!0}),document.addEventListener("touchstart",e,{passive:!0})}}refreshActiveResources(){const e=Date.now();for(const[,t]of this.activeResources)t.persistent||(t.timestamp=e)}registerResources(e,t,r={}){const a=`${e}_${this.resourceCounter++}`;return this.activeResources.set(a,{componentId:e,resources:t,timestamp:Date.now(),persistent:r.persistent||!1}),a}cleanupByComponent(e){const t=[];for(const[r,a]of this.activeResources)a.componentId===e&&(this.disposeResources(a.resources),t.push(r));t.forEach(r=>this.activeResources.delete(r))}cleanup(e){const t=this.activeResources.get(e);t&&(this.disposeResources(t.resources),this.activeResources.delete(e))}disposeResources(e){e&&(e.renderer&&(e.renderer.dispose(),e.renderer.info&&e.renderer.info.reset()),e.scene&&this.disposeScene(e.scene),e.geometry&&(Array.isArray(e.geometry)?e.geometry.forEach(t=>t.dispose()):e.geometry.dispose()),e.materials&&(Array.isArray(e.materials)?e.materials.forEach(t=>this.disposeMaterial(t)):this.disposeMaterial(e.materials)),e.textures&&(Array.isArray(e.textures)?e.textures.forEach(t=>t.dispose()):e.textures.dispose()),e.gl&&e.gl.getExtension&&(e.buffers&&Object.values(e.buffers).forEach(t=>{t&&e.gl.deleteBuffer(t)}),e.programs&&Object.values(e.programs).forEach(t=>{t&&e.gl.deleteProgram(t)})))}disposeScene(e){if(e)for(e.traverse(t=>{t.geometry&&t.geometry.dispose(),t.material&&this.disposeMaterial(t.material),t.texture&&t.texture.dispose()});e.children.length>0;)e.remove(e.children[0])}disposeMaterial(e){if(e){if(Array.isArray(e)){e.forEach(t=>this.disposeMaterial(t));return}Object.keys(e).forEach(t=>{const r=e[t];r&&typeof r.dispose=="function"&&(r.image&&r.image.tagName==="VIDEO"&&(r.image.pause(),r.image.src="",r.image.load()),r.dispose())}),e.dispose()}}forceCleanupAll(){console.warn("üö® Âº∫Âà∂Ê∏ÖÁêÜÊâÄÊúâWebGLËµÑÊ∫ê");for(const[,e]of this.activeResources)this.disposeResources(e.resources);this.activeResources.clear(),typeof window<"u"&&window.gc&&setTimeout(()=>window.gc(),100)}getMemoryInfo(){const t={activeResourceGroups:this.activeResources.size,timestamp:Date.now(),persistentResources:0,temporaryResources:0,sectionBreakdown:{}};for(const[r,a]of this.activeResources){a.persistent?t.persistentResources++:t.temporaryResources++;const m=a.componentId;t.sectionBreakdown[m]||(t.sectionBreakdown[m]={count:0,persistent:0,temporary:0,resourceIds:[],lastActive:a.timestamp}),t.sectionBreakdown[m].count++,t.sectionBreakdown[m].resourceIds.push(r),t.sectionBreakdown[m].lastActive=Math.max(t.sectionBreakdown[m].lastActive,a.timestamp),a.persistent?t.sectionBreakdown[m].persistent++:t.sectionBreakdown[m].temporary++}return typeof window<"u"&&window.performance&&window.performance.memory&&(t.jsHeapSize=Math.round(window.performance.memory.usedJSHeapSize/1024/1024),t.jsHeapLimit=Math.round(window.performance.memory.totalJSHeapSize/1024/1024)),t.resourceStats=this.getResourceTypeStats(),t}getResourceTypeStats(){const e={renderers:0,scenes:0,geometries:0,materials:0,textures:0,webglContexts:0,canvas2dContexts:0};for(const[,t]of this.activeResources){const r=t.resources;r.renderer&&e.renderers++,r.scene&&e.scenes++,r.gl&&e.webglContexts++,r.context2d&&e.canvas2dContexts++,r.geometry&&(e.geometries+=Array.isArray(r.geometry)?r.geometry.length:1),r.materials&&(e.materials+=Array.isArray(r.materials)?r.materials.length:1),r.textures&&(e.textures+=Array.isArray(r.textures)?r.textures.length:1)}return e}cleanupOldResources(e=3e5){if(this.isPageVisible||this.hasRecentActivity())return;const t=Date.now(),r=[];for(const[a,m]of this.activeResources){if(m.persistent)continue;const T=m.componentId&&m.componentId.includes("BackgroundCanvas")?18e5:e;t-m.timestamp>T&&(this.disposeResources(m.resources),r.push(a))}r.forEach(a=>this.activeResources.delete(a))}hasRecentActivity(){return typeof window<"u"?Date.now()-(this.lastActivityTime||0)<3e5:!1}getDebugInfo(){const e=Date.now(),t=[];for(const[r,a]of this.activeResources)t.push({id:r,componentId:a.componentId,persistent:a.persistent,age:Math.round((e-a.timestamp)/1e3),isBackgroundCanvas:a.componentId&&a.componentId.includes("BackgroundCanvas")});return{totalResources:this.activeResources.size,isPageVisible:this.isPageVisible,hasRecentActivity:this.hasRecentActivity(),lastActivityAge:Math.round((e-(this.lastActivityTime||0))/1e3),resources:t}}cleanupOtherSections(e,t=[]){if(!e)return;const r=new Set([e,...t]),a=[];let m=0;for(const[T,i]of this.activeResources)i.persistent||r.has(i.componentId)||(this.disposeResources(i.resources),a.push(T),m++);return a.forEach(T=>this.activeResources.delete(T)),m}}const _=new Ue;typeof window<"u"&&setInterval(()=>{_.cleanupOldResources()},3e5);const H={"nz-blue":{name:{en:"New Zealand Blue",zh:"Êñ∞Ë•øÂÖ∞Ëìù"},description:{en:"Inspired by New Zealand's coastal beauty",zh:"ÁÅµÊÑüÊù•Ëá™Êñ∞Ë•øÂÖ∞Êµ∑Â≤∏‰πãÁæé"},icon:"üá≥üáø",colors:{primary:"#00ffff",secondary:"#0080ff",accent:"#4dd0e1",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1e7ef","text-muted":"#888888",border:"#00ffff",divider:"#00ffff",hover:"rgba(0, 255, 255, 0.1)",button:"rgba(0, 255, 255, 0.6)",loading:"#00ffff",glow:"#00ffff",shadow:"rgba(0, 255, 255, 0.5)",cursor:"#00ffff","avatar-glow":"#00ffff",success:"#00ff00",warning:"#ffff00",error:"#ff0000","gradient-from":"#0080ff","gradient-via":"#00ffff","gradient-to":"#4dd0e1"}},"si-green":{name:{en:"South Island Green",zh:"ÁªøÊÑèÂçóÂ≤õ"},description:{en:"Inspired by South Island's lush landscapes",zh:"ÁÅµÊÑüÊù•Ëá™ÂçóÂ≤õÁöÑËåÇÂØÜÊôØËßÇ"},icon:"üèîÔ∏è",colors:{primary:"#10b981",secondary:"#059669",accent:"#4ade80",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1f5fe","text-muted":"#888888",border:"#10b981",divider:"#10b981",hover:"rgba(16, 185, 129, 0.1)",button:"rgba(16, 185, 129, 0.6)",loading:"#10b981",glow:"#10b981",shadow:"rgba(16, 185, 129, 0.5)",cursor:"#10b981","avatar-glow":"#10b981",success:"#10b981",warning:"#ffff00",error:"#ff0000","gradient-from":"#059669","gradient-via":"#10b981","gradient-to":"#4ade80"}}},Se=()=>{const{theme:w,setTheme:e}=de(),t=i=>{const v=H[i];if(!v)return;const g=document.documentElement;Object.entries(v.colors).forEach(([d,M])=>{if(g.style.setProperty(`--theme-${d}`,M),d==="primary"||d==="secondary"){const E=r(M);E&&g.style.setProperty(`--theme-${d}-rgb`,`${E.r}, ${E.g}, ${E.b}`)}}),g.className=g.className.replace(/theme-\w+/g,""),g.classList.add(`theme-${i}`),e(i)},r=i=>{const v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null},a=()=>{const i=Object.keys(H),g=(i.indexOf(w)+1)%i.length;t(i[g])},m=()=>H[w]||H["nz-blue"],T=()=>Object.entries(H).map(([i,v])=>({key:i,...v}));return l.useEffect(()=>{const i=H[w]?w:"nz-blue";if(i!==w){e(i);return}const v=H[i];if(!v)return;const g=document.documentElement;Object.entries(v.colors).forEach(([d,M])=>{if(g.style.setProperty(`--theme-${d}`,M),d==="primary"||d==="secondary"){const E=r(M);E&&g.style.setProperty(`--theme-${d}-rgb`,`${E.r}, ${E.g}, ${E.b}`)}}),g.className=g.className.replace(/theme-\w+/g,""),g.classList.add(`theme-${i}`)},[w,e]),{theme:w,applyTheme:t,toggleTheme:a,getCurrentTheme:m,getAllThemes:T,getThemeColors:()=>m().colors,themes:H}},Me=({enableOpeningAnimation:w=!1,onAnimationComplete:e,onReady:t})=>{const r=l.useRef(),a=l.useRef(),m=l.useRef(),T=l.useRef({x:0,y:0}),i=l.useRef({x:0,y:0}),v=l.useRef({x:0,y:0}),g=l.useRef({x:0,y:0,z:0}),d=l.useRef({x:0,y:0,z:0}),M=l.useRef(performance.now()),E=l.useRef(!1),O=l.useRef(null),{getContent:X}=de(),P=X(),{getThemeColors:q}=Se(),j=q(),C=l.useCallback(()=>Math.max(window.innerWidth,window.innerHeight),[]),[L,D]=l.useState(!1),y=l.useMemo(()=>{var N,b,c,V,s,F;return[{name:"home",label:((N=P.navigation)==null?void 0:N.home)||"Home",color:"#afcc8f",effect:"effectchaos",video:"/cube-textures/home.mp4"},{name:"about",label:((b=P.navigation)==null?void 0:b.about)||"About",color:"#7ca65c",effect:"effectlorenz",texture:"about"},{name:"projects",label:((c=P.navigation)==null?void 0:c.projects)||"Projects",color:"#5d7d4b",effect:"effectmonjori",texture:"projects"},{name:"gallery",label:((V=P.navigation)==null?void 0:V.gallery)||"Gallery",color:"#768e90",effect:"effectheartbeats",texture:"gallery"},{name:"education",label:((s=P.navigation)==null?void 0:s.education)||"Education",color:"#4a636a",effect:"effectfuse",texture:"education"},{name:"contact",label:((F=P.navigation)==null?void 0:F.contact)||"Contact",color:"#3a4e55",effect:"effectpixeldistortion",texture:"contact"}]},[P.navigation]);l.useEffect(()=>{(async()=>{try{console.log("üöÄ ÂºÄÂßãHero CubeÁ∫πÁêÜÈ¢ÑÂä†ËΩΩ...");const b=await Ce.loadHeroCubeTextures(y);console.log("‚úÖ Hero CubeÁ∫πÁêÜÂä†ËΩΩÂÆåÊàê!"),console.log(`  - ÂõæÁâáÁ∫πÁêÜ: ${b.textures.size}`),console.log(`  - ËßÜÈ¢ëÁ∫πÁêÜ: ${b.videos.size}`),console.log(`  - ÈîôËØØÊï∞Èáè: ${b.errors.length}`),b.errors.length>0&&console.warn("‚ö†Ô∏è ÈÉ®ÂàÜÁ∫πÁêÜÂä†ËΩΩÂ§±Ë¥•:",b.errors),O.current=b,console.log("üîç Ë∞ÉËØïÈ¢ÑÂä†ËΩΩÁªìÊûú:"),console.log("  - Á∫πÁêÜMapÈîÆ:",Array.from(b.textures.keys())),console.log("  - ËßÜÈ¢ëMapÈîÆ:",Array.from(b.videos.keys())),console.log("  - facesÈÖçÁΩÆ:",y.map(c=>({name:c.name,hasVideo:!!c.video,hasTexture:!!c.texture}))),D(!0)}catch(b){console.warn("Á∫πÁêÜÈ¢ÑÂä†ËΩΩÈÉ®ÂàÜÂ§±Ë¥•ÔºåÁªßÁª≠Ê∏≤Êüì:",b),D(!0)}})()},[y]),l.useEffect(()=>{const N=()=>{var s;if((s=r.current)!=null&&s.firstChild){const F=r.current.firstChild;F.style.width="100vw",F.style.height="100vh"}},b=()=>{_.isPageVisible&&_.refreshActiveResources()},c=["mousedown","mousemove","keydown","scroll","touchstart"];window.addEventListener("resize",N);const V=be.debounce(b,3e4);return c.forEach(s=>{document.addEventListener(s,V)}),()=>{window.removeEventListener("resize",N),c.forEach(s=>{document.removeEventListener(s,V)})}},[C]);const $=l.useRef(j),W=l.useRef(e),re=l.useRef(t);return l.useEffect(()=>{$.current=j},[j]),l.useEffect(()=>{W.current=e},[e]),l.useEffect(()=>{re.current=t},[t]),l.useEffect(()=>{if(!L)return;const N=r.current;if(!N)return;const b=new Pe,c=new je(50,1,.1,1e3);c.position.z=10;const V=window.innerWidth*window.innerHeight<1920*1080,s=new $e({alpha:!0,antialias:V,powerPreference:"high-performance",precision:"lowp",stencil:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1});s.setClearColor(0,0),s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(Math.min(window.devicePixelRatio,1)),s.shadowMap.enabled=!1,s.physicallyCorrectLights=!1,s.toneMapping=ve,s.domElement.style.position="fixed",s.domElement.style.top="0",s.domElement.style.left="0",s.domElement.style.width="100vw",s.domElement.style.height="100vh",s.domElement.style.display="block",s.domElement.style.zIndex="10",s.domElement.style.pointerEvents="none",s.domElement.setAttribute("data-no-custom-cursor","true"),s.domElement.setAttribute("data-hero-cube-canvas","true"),s.domElement.classList.add("hero-cube-canvas"),s.setSize(window.innerWidth,window.innerHeight),c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),s.shadowMap.enabled=!1,s.physicallyCorrectLights=!1,s.toneMapping=ve,s.toneMappingExposure=1,s.outputColorSpace=Re,N.appendChild(s.domElement);const F=be.debounce(()=>{if(s&&c){const o=window.innerWidth,R=window.innerHeight;s.setSize(o,R),c.aspect=o/R,c.updateProjectionMatrix()}},100);window.addEventListener("resize",F);const Ae=new Ne(16777215,.8);b.add(Ae);const ne=new le(16777215,1.2);ne.position.set(5,5,5),ne.castShadow=!0,b.add(ne);const me=new le(1096065,.6);me.position.set(-5,2,-3),b.add(me);const fe=new le(3462041,.5);fe.position.set(3,-4,5),b.add(fe);const pe=new Ee(14742240,1.5,15);pe.position.set(0,0,8),b.add(pe);const he=new Ee(65416,.8,20);he.position.set(0,0,-10),b.add(he);const se=2.8,ge=new Oe(se,se,se,8,.1),ae=(o=256)=>{const R=document.createElement("canvas");R.width=o,R.height=o;const x=R.getContext("2d"),u=o/8;for(let k=0;k<8;k++)for(let A=0;A<8;A++)x.fillStyle=(k+A)%2===0?$.current.surface:$.current.muted,x.fillRect(k*u,A*u,u,u);x.fillStyle=$.current.primary,x.font=`bold ${o/16}px Arial`,x.textAlign="center",x.textBaseline="middle",x.fillText("VIDEO",o/2,o/2-o/32),x.fillText("ERROR",o/2,o/2+o/32);const f=new Te(R);return f.needsUpdate=!0,f},ie=[y.find(o=>o.name==="about"),y.find(o=>o.name==="gallery"),y.find(o=>o.name==="contact"),y.find(o=>o.name==="education"),y.find(o=>o.name==="home"),y.find(o=>o.name==="projects")].map((o,R)=>{var Q,K;if(console.log(`Face ${R} (${["right","left","top","bottom","front","back"][R]}):`,o?o.name:"NOT FOUND",o),!o){console.error(`Face at index ${R} not found!`);const G=ae(256);return new ee({map:G,transparent:!1,side:te})}if(o.video){const G=ae(256),I=new ee({map:G,transparent:!1,side:te});if((Q=O.current)!=null&&Q.videos.has(o.name)){const h=O.current.videos.get(o.name);if(I.map=h,I.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ: ${o.name}`),h.image){const S=h.image;console.log(`üé¨ ËßÜÈ¢ëÁä∂ÊÄÅ: ${o.name}`,{paused:S.paused,currentTime:S.currentTime,duration:S.duration,readyState:S.readyState,networkState:S.networkState}),S.paused&&S.play().catch(Z=>console.warn("ËßÜÈ¢ëËá™Âä®Êí≠ÊîæÂ§±Ë¥•:",Z));const z=()=>{S.paused&&S.play().then(()=>{console.log(`üé¨ Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÂºÄÂßãÊí≠Êîæ: ${o.name}`),document.removeEventListener("click",z),document.removeEventListener("touchstart",z)}).catch(Z=>console.warn("Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÊí≠ÊîæÂ§±Ë¥•:",Z))};S.paused&&(document.addEventListener("click",z,{once:!0}),document.addEventListener("touchstart",z,{once:!0}))}}else{console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ‰∏çÂèØÁî®ÔºåÂàõÂª∫Êñ∞ÁöÑ: ${o.name}`);const h=document.createElement("video");h.src=o.video,h.crossOrigin="anonymous",h.loop=!0,h.muted=!0,h.autoplay=!0,h.playsInline=!0,h.preload="metadata";const S=()=>{try{const z=new De(h);z.minFilter=oe,z.magFilter=oe,z.format=Fe,z.generateMipmaps=!1,z.flipY=!0,z.colorSpace=Re,I.map&&I.map!==G&&I.map.dispose(),I.map=z,I.needsUpdate=!0,h.play().catch(Z=>{console.warn("Video autoplay failed:",Z)})}catch(z){console.warn("Failed to create video texture:",z)}};h.addEventListener("loadeddata",()=>{S()}),h.addEventListener("canplay",()=>{S()}),h.addEventListener("loadedmetadata",()=>{h.play().catch(()=>{})}),h.addEventListener("error",z=>{console.warn("Video loading error, using fallback texture:",z)}),h.load()}return I}if(o.texture){const G=ae(256),I=new ee({map:G,transparent:!1,side:te});if((K=O.current)!=null&&K.textures.has(o.texture)){const h=O.current.textures.get(o.texture);o.texture==="education"&&(h.flipY=!0,h.needsUpdate=!0,console.log(`üîÑ ‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),I.map=h,I.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩÁ∫πÁêÜ: ${o.texture}`)}else console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩÁ∫πÁêÜ‰∏çÂèØÁî®Ôºå‰ΩøÁî®Áªü‰∏ÄÁ≥ªÁªüÂºÇÊ≠•Âä†ËΩΩ: ${o.texture}`),(async()=>{try{const h=await Ce.loadSceneTextures("hero-cube",{textures:[o.texture]});if(h.textures.has(o.texture)){const S=h.textures.get(o.texture);o.texture==="education"&&(S.flipY=!0,S.needsUpdate=!0,console.log(`üîÑ ÂºÇÊ≠•Âä†ËΩΩÊó∂‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),I.map=S,I.needsUpdate=!0,console.log(`‚úÖ ÂçïÁã¨Âä†ËΩΩCubeÁ∫πÁêÜÊàêÂäü: ${o.texture}`)}else throw new Error(`Á∫πÁêÜÊú™ÊâæÂà∞: ${o.texture}`)}catch(h){console.warn(`Âä†ËΩΩÁ∫πÁêÜÂ§±Ë¥•: ${o.texture}`,h)}})();return I}const x=document.createElement("canvas"),u=256;x.width=u,x.height=u;const f=x.getContext("2d");f.clearRect(0,0,u,u);const k=f.createRadialGradient(u/2,u/2,0,u/2,u/2,u/2);k.addColorStop(0,`${o.color}25`),k.addColorStop(.6,`${o.color}15`),k.addColorStop(1,`${o.color}08`),f.fillStyle=k,f.fillRect(0,0,u,u),f.strokeStyle=`${o.color}60`,f.lineWidth=2;const A=u*.05;f.strokeRect(A,A,u-A*2,u-A*2);const Y=f.createLinearGradient(0,0,u,u);Y.addColorStop(0,"rgba(255, 255, 255, 0.15)"),Y.addColorStop(.5,"rgba(255, 255, 255, 0.08)"),Y.addColorStop(1,"rgba(255, 255, 255, 0)"),f.fillStyle=Y,f.fillRect(0,0,u/3,u),f.shadowColor="rgba(0, 0, 0, 0.8)",f.shadowBlur=6;const ce=36;f.font=`bold ${ce}px "Helvetica Neue", Arial`,f.fillStyle=$.current.text||"#ffffff",f.textAlign="center",f.textBaseline="middle",f.fillText(o.label,u/2,u/2),f.shadowColor="transparent",f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0;const U=new Te(x);return U.needsUpdate=!0,U.generateMipmaps=!1,U.minFilter=oe,U.magFilter=oe,new ee({map:U,transparent:!1,side:te})}),n=new Be(ge,ie);b.add(n),a.current=n,w?(n.position.set(0,0,-80),n.scale.set(.05,.05,.05),n.rotation.set(0,0,0),m.current=He.timeline({onComplete:()=>{W.current&&W.current(),window.dispatchEvent(new CustomEvent("cubeAnimationComplete"))}}).to(n.position,{z:0,duration:2,ease:"power3.out",delay:.5}).to(n.scale,{x:1.2,y:1.2,z:1.2,duration:2,ease:"back.out(1.7)"},.5).to(n.scale,{x:1.2,y:1.2,z:1.2,duration:.5,ease:"power2.out"},2.5).to(n.rotation,{x:-Math.PI*.5,y:0,z:0,duration:1.5,ease:"power3.out"},2.5).to(c.position,{x:0,y:0,z:5,duration:1.5,ease:"power3.out",onUpdate:()=>c.lookAt(n.position)},2.5).to(n.rotation,{x:0,y:Math.PI*.5,z:Math.PI,duration:1.5,ease:"power2.inOut"},5.5).to(c.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>c.lookAt(n.position)},5.5).to(n.rotation,{x:0,y:Math.PI,z:Math.PI,duration:1.5,ease:"power2.inOut"},8.5).to(c.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>c.lookAt(n.position)},8.5).to(n.rotation,{x:0,y:-Math.PI*.5,z:Math.PI,duration:1.5,ease:"power2.inOut"},11.5).to(c.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>c.lookAt(n.position)},11.5).to(n.rotation,{x:0,y:0,z:0,duration:1.5,ease:"power2.inOut"},14.5).to(c.position,{x:0,y:0,z:5,duration:.5,ease:"power2.out",onUpdate:()=>c.lookAt(n.position)},17.5).to(n.rotation,{x:Math.PI*.5,y:Math.PI,z:0,duration:.5,ease:"power2.out"},17.5).to(c.position,{x:0,y:0,z:5,duration:.5,ease:"power2.out",onUpdate:()=>c.lookAt(n.position)},17.5).to(c.position,{x:0,y:2,z:6,duration:.7,ease:"power2.inOut",onUpdate:()=>c.lookAt(n.position)},20.5).to(c.position,{x:0,y:0,z:10,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(n.position)},21.2).to(n.scale,{x:3,y:3,z:3,duration:1.7,ease:"power3.in"},22).to(c.position,{z:2,duration:1.7,ease:"power3.in",onUpdate:()=>c.lookAt(n.position)},22).to(n.rotation,{x:n.rotation.x+Math.PI*4,y:n.rotation.y+Math.PI*6,z:n.rotation.z+Math.PI*3,duration:1.7,ease:"power2.out"},22).to(n.scale,{x:1,y:1,z:1,duration:1.8,ease:"power2.out"},23.7).to(c.position,{z:10,duration:.5,ease:"power2.out",onUpdate:()=>c.lookAt(n.position)},23.7).to(n.rotation,{x:-Math.PI*.81,y:Math.PI*.25,z:0,duration:1.8,ease:"power2.out"},23.7).to(n.scale,{x:1.15,y:1.15,z:1.15,duration:.2,ease:"power2.out"},26).to(n.scale,{x:1,y:1,z:1,duration:.3,ease:"bounce.out"},26.2).to(n.scale,{x:1.08,y:1.08,z:1.08,duration:.15,ease:"power2.out"},26.6).to(n.scale,{x:1,y:1,z:1,duration:.25,ease:"bounce.out"},26.75).to(n.scale,{x:1.04,y:1.04,z:1.04,duration:.1,ease:"power2.out"},27.1).to(n.scale,{x:1,y:1,z:1,duration:.4,ease:"elastic.out(1, 0.3)"},27.2)):n.rotation.set(-Math.PI*.81,Math.PI*.25,0);const xe=o=>{const R=o.clientX/window.innerWidth*2-1,x=-(o.clientY/window.innerHeight)*2+1,u=performance.now(),f=Math.max(u-M.current,1),k=R-v.current.x,A=x-v.current.y;i.current.x=k/(f*.001),i.current.y=A/(f*.001),T.current.x=R,T.current.y=x,v.current={x:R,y:x},M.current=u};window.addEventListener("mousemove",xe);const we=()=>{requestAnimationFrame(we);const o=performance.now(),R=Math.min((o-M.current)*.001,.02);if(M.current=o,!E.current){const x=T.current.x*.1+Math.PI*.25,f=T.current.y*.05-Math.PI*.81+d.current.x,k=x+d.current.y,A=d.current.z;n.rotation.x+=(f-n.rotation.x)*.02,n.rotation.y+=(k-n.rotation.y)*.02,n.rotation.z+=(A-n.rotation.z)*.02,n.rotation.y+=.001}if(R>0){const A=i.current.y*2.5,Y=-i.current.x*2.5,ce=(i.current.x+i.current.y)*2.5*.4,U=-d.current.x*12,ye=-d.current.y*12,Q=-d.current.z*12;g.current.x+=(A+U)*R,g.current.y+=(Y+ye)*R,g.current.z+=(ce+Q)*R,g.current.x*=.88,g.current.y*=.88,g.current.z*=.88,d.current.x+=g.current.x*R,d.current.y+=g.current.y*R,d.current.z+=g.current.z*R,d.current.x=Math.max(-1.2,Math.min(1.2,d.current.x)),d.current.y=Math.max(-1.2,Math.min(1.2,d.current.y)),d.current.z=Math.max(-1.2,Math.min(1.2,d.current.z));const K=Math.sin(o*.001)*.05;n.position.set(0,K,0),i.current.x*=.92,i.current.y*=.92}n.children.forEach(x=>{if(x.material&&x.material.map&&x.material.map.image&&x.material.map.image.tagName==="VIDEO"){const u=x.material.map.image;!u.paused&&u.readyState>=2&&(x.material.map.needsUpdate=!0)}}),s.render(b,c)};re.current&&setTimeout(()=>{re.current()},100);const ke=_.registerResources("HeroCube",{renderer:s,scene:b,geometry:ge,materials:ie,textures:ie.map(o=>o.map).filter(Boolean)},{persistent:!0});return we(),()=>{m.current&&m.current.kill(),N&&s.domElement&&N.removeChild(s.domElement),window.removeEventListener("mousemove",xe),window.removeEventListener("resize",F),_.cleanup(ke)}},[y,L,w]),p.jsx("div",{className:"relative",children:p.jsx("div",{ref:r,className:"fixed inset-0 w-full h-full overflow-hidden",style:{pointerEvents:"none",zIndex:5,filter:"drop-shadow(0 0 30px rgba(16, 185, 129, 0.3)) drop-shadow(0 0 80px rgba(0, 255, 136, 0.2))"}})})};Me.propTypes={enableOpeningAnimation:B.bool,onAnimationComplete:B.func,onReady:B.func};function J(...w){return w.filter(Boolean).join(" ").trim()}const ue=({children:w,content:e,placement:t="top",className:r,delay:a=300,...m})=>{const[T,i]=l.useState(!1),[v,g]=l.useState(t),d=l.useRef(null),M=l.useRef(null),E=l.useRef(null),O=()=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{i(!0)},a)},X=()=>{E.current&&clearTimeout(E.current),i(!1)};l.useEffect(()=>{if(T){const j=()=>{if(!d.current||!M.current)return;const C=d.current.getBoundingClientRect(),L=M.current.getBoundingClientRect(),D={width:window.innerWidth,height:window.innerHeight};let y=t;const $={top:C.top-L.height-8,bottom:C.bottom+8,left:C.left-L.width-8,right:C.right+8};switch(t){case"top":$.top<0&&(y="bottom");break;case"bottom":$.bottom+L.height>D.height&&(y="top");break;case"left":$.left<0&&(y="right");break;case"right":$.right+L.width>D.width&&(y="left");break}if(y==="left"||y==="right"){const W=C.top+C.height/2;(W-L.height/2<0||W+L.height/2>D.height)&&(y=$.top>=0?"top":"bottom")}g(y)};requestAnimationFrame(()=>{j()})}},[T,e,t]),l.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]);const P=()=>{const j="absolute z-[9999] px-3 py-2 text-xs font-medium transition-all duration-200 transform",C="bg-black/90 text-theme-primary border border-theme-primary/30 rounded-lg backdrop-blur-sm",L="shadow-lg shadow-theme-primary/20",D=T?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-95 pointer-events-none";let y="";switch(v){case"top":y="bottom-full left-1/2 -translate-x-1/2 mb-2";break;case"bottom":y="top-full left-1/2 -translate-x-1/2 mt-2";break;case"left":y="right-full top-1/2 -translate-y-1/2 mr-2";break;case"right":y="left-full top-1/2 -translate-y-1/2 ml-2";break}return J(j,C,L,D,y,r)},q=()=>{const j="absolute w-2 h-2 bg-black/90 border border-theme-primary/30 transform rotate-45";let C="";switch(v){case"top":C="top-full left-1/2 -translate-x-1/2 -mt-1 border-t-0 border-l-0";break;case"bottom":C="bottom-full left-1/2 -translate-x-1/2 -mb-1 border-b-0 border-r-0";break;case"left":C="left-full top-1/2 -translate-y-1/2 -ml-1 border-l-0 border-b-0";break;case"right":C="right-full top-1/2 -translate-y-1/2 -mr-1 border-r-0 border-t-0";break}return J(j,C)};return p.jsxs("div",{className:"relative inline-block",ref:d,onMouseEnter:O,onMouseLeave:X,...m,children:[w,p.jsxs("div",{ref:M,className:P(),style:{maxWidth:"200px",whiteSpace:"nowrap",zIndex:9999},children:[e,p.jsx("div",{className:q()})]})]})};ue.propTypes={children:B.node.isRequired,content:B.node.isRequired,placement:B.oneOf(["top","bottom","left","right"]),className:B.string,delay:B.number};const We=({children:w,className:e,level:t=1,...r})=>{const a="text-theme-text-primary transition-colors duration-300",m={1:"text-4xl font-bold",2:"text-3xl font-semibold",3:"text-2xl font-medium",4:"text-xl font-medium",5:"text-lg font-medium",6:"text-base font-medium"},T=`h${t}`;return p.jsx(T,{className:J(a,m[t],e),...r,children:w})},Ye=({children:w,className:e,...t})=>p.jsx("p",{className:J("text-theme-text-secondary text-lg transition-colors duration-300",e),...t,children:w}),Ke=({children:w,className:e,...t})=>p.jsx("p",{className:J("text-theme-text-muted transition-colors duration-300",e),...t,children:w}),ze=({language:w,enableOpeningAnimation:e=!1})=>{const{getContent:t,toggleLanguage:r}=de(),a=t(),{toggleTheme:m,getCurrentTheme:T}=Se(),i=T(),[v,g]=l.useState(!1),[d,M]=l.useState(!1),[E,O]=l.useState(!1),[X,P]=l.useState(!1);l.useEffect(()=>{const j=setTimeout(()=>{O(!0)},400),C=setTimeout(()=>{M(!0)},600),L=setTimeout(()=>{g(!0)},2e3);return()=>{clearTimeout(j),clearTimeout(C),clearTimeout(L)}},[]);const q=l.useCallback(()=>{P(!0),O(!1)},[]);return p.jsxs("div",{className:"w-screen overflow-hidden",style:{margin:0,padding:0,background:"transparent",height:"100vh",minHeight:"100dvh"},children:[p.jsx("div",{className:`absolute top-8 left-1/2 transform -translate-x-1/2 text-center text-white z-50 w-full px-4 ${e?"grand-title-entrance":""}`,style:e?{}:{animation:"movieTitleEntrance 2s ease-out forwards 0.3s",animationFillMode:"both"},children:p.jsxs("div",{className:"flex flex-col items-center justify-center w-full relative",children:[p.jsx(We,{level:1,className:`text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold font-beauRivage hover:text-theme-primary transition-colors duration-300 mb-2 sm:mb-4 leading-tight text-center w-full mt-12 ${e?"shimmer-text":""}`,children:a.home.name}),p.jsx(Ye,{className:`text-lg sm:text-xl md:text-2xl lg:text-3xl font-mono text-theme-accent mt-48 ${e?"grand-subtitle-entrance":""}`,style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"max-content",whiteSpace:"nowrap"},children:a.home.title})]})}),p.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 text-center z-50 w-full px-4 ${e?"grand-slogan-entrance":""}`,style:{bottom:"max(4rem, env(safe-area-inset-bottom) + 3rem)",...e?{}:{animation:"sloganEntrance 1.5s ease-out forwards 2s",animationFillMode:"both"}},children:p.jsx("div",{className:"text-center",children:p.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light text-theme-primary tracking-wider leading-relaxed transition-colors duration-300",children:a.home.slogan})})}),E&&!X&&p.jsx(Ve,{size:160,strokeWidth:12,showMask:!0}),d&&p.jsx(Me,{enableOpeningAnimation:e,onReady:q}),v&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"max(1.5rem, env(safe-area-inset-left) + 1rem)"},children:p.jsx(ue,{content:w==="en"?"English":"‰∏≠Êñá",placement:"top",delay:200,children:p.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${a.ui.language}: ${w==="en"?"English":"‰∏≠Êñá"}`,children:p.jsx(Ie,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),p.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",right:"max(1.5rem, env(safe-area-inset-right) + 1rem)"},children:p.jsx(ue,{content:i.name[w]||i.name.en,placement:"left",delay:200,children:p.jsx("button",{onClick:m,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${a.ui.toggleTheme}: ${i.name[w]||i.name.en}`,children:p.jsx(Le,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),p.jsx("div",{className:`absolute z-50 transition-opacity duration-1000 md:hidden ${v?"opacity-100":"opacity-0"}`,style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"50%",transform:"translateX(-50%)"},children:p.jsx("p",{className:"text-white/70 text-sm font-medium whitespace-nowrap animate-pulse",children:a.ui.mobileScrollHint})})]})]})};ze.propTypes={language:B.string.isRequired,enableOpeningAnimation:B.bool};const et=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{et as H,We as T,Ye as a,Ke as b,Se as u,_ as w};
