import{r as t,j as o}from"./react-DAuysMQ2.js";import{P as y}from"./vendor-DC1nlNB_.js";import"./leaflet-B1_H9jHX.js";const j="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='solid'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle/%3e%3cpath%20d='M436.2,181.033a31.842,31.842,0,0,0-27.025-6.171L287.4,202.538a39.794,39.794,0,0,0-31.134,39V382.315a2.99,2.99,0,0,1-4.3,2.7,51.972,51.972,0,0,0-28.661-4.785C196.777,383,176,402.39,176,424.376a33.257,33.257,0,0,0,11.315,24.906c8.035,7.24,19.3,11.183,31.56,11.183a58.9,58.9,0,0,0,6.087-.319c26.524-2.769,47.3-22.161,47.3-44.146V308.772a8,8,0,0,1,6.227-7.8l144-32.728a8,8,0,0,1,9.773,7.8v66.177a2.99,2.99,0,0,1-4.312,2.7A52.075,52.075,0,0,0,399.358,340c-26.543,2.617-47.334,21.909-47.334,43.919a33.416,33.416,0,0,0,11.307,24.95c8.093,7.335,19.47,11.339,31.84,11.339,1.9,0,3.821-.095,5.758-.286C427.472,417.3,448.263,398.01,448.263,376V206.728A32.757,32.757,0,0,0,436.2,181.033ZM277.454,59.021l2.533,50.729A10,10,0,0,1,272.216,120l-96.735,22.274a23.876,23.876,0,0,0-18.681,23.4V284.728c0,22-20.051,41.263-45.649,43.861a54.322,54.322,0,0,1-5.484.279c-11.687,0-22.52-3.848-30.325-10.9a33.963,33.963,0,0,1-11.455-25.433c0-22,20.051-41.265,45.649-43.862a49.071,49.071,0,0,1,26.876,4.578,3.006,3.006,0,0,0,4.388-2.657V110.271a40,40,0,0,1,31.135-39.006l93.315-21.5A10,10,0,0,1,277.454,59.021Z'%20style='fill:%233b3b3b'/%3e%3c/svg%3e",z=({canvasId:R,musicFile:A})=>{const n=t.useRef(null),u=t.useRef(null),r=t.useRef(null),s=t.useRef(null),l=t.useRef(null),m=t.useRef(null),v=t.useRef(null),[c,C]=t.useState(!1);t.useEffect(()=>{if(!u.current)return;r.current||(r.current=new(window.AudioContext||window.webkitAudioContext));const e=r.current;s.current||(s.current=e.createAnalyser(),s.current.fftSize=512);const a=s.current;return!l.current&&n.current&&(l.current=e.createMediaElementSource(n.current),l.current.connect(a),a.connect(e.destination)),c&&f(),()=>{cancelAnimationFrame(m.current),cancelAnimationFrame(v.current)}},[c]);const f=()=>{const e=u.current;if(!e)return;const a=e.getContext("2d");e.width=200,e.height=20;const x=s.current,d=x.frequencyBinCount,p=new Uint8Array(d),w=()=>{m.current=requestAnimationFrame(w),x.getByteFrequencyData(p),a.clearRect(0,0,e.width,e.height);const P=e.height/2,h=e.width/d;for(let i=0;i<d;i++){const g=p[i]/1.8,V=i*h;a.fillStyle="rgba(50, 255, 100, 0.7)",a.fillRect(V,P-g/2,h,g)}};w()},b=()=>{if(!n.current)return;r.current||(r.current=new(window.AudioContext||window.webkitAudioContext));const e=r.current;c?n.current.pause():e.state==="suspended"?e.resume().then(()=>{n.current.play().then(()=>{f()})}):n.current.play().then(()=>{f()}),C(!c)};return o.jsxs("div",{className:"absolute top-[-10px] z-50 left-1/2 cursor-pointer transform -translate-x-1/2",onClick:b,children:[c?o.jsx("canvas",{id:R,title:"Click to Play/Pause Music",ref:u,className:"w-[200px] h-[20px] z-50 left-1/2 transform -translate-x-1/2 transition-all duration-500 animate-zoomIn"}):o.jsx("img",{src:j,alt:"Music Icon",className:"w-10 h-10 filter mx-auto invert hover:scale-120 hover:animate-spin"}),o.jsx("audio",{ref:n,src:A,loop:!0})]})};z.propTypes={canvasId:y.string.isRequired,musicFile:y.string.isRequired};export{z as default};
