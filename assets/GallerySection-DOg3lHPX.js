import{r as m,j as a}from"./react-C4wAxbNA.js";import{P as ct}from"./vendor-BBRlQ_zh.js";import{H as lt,J as dt,S as ht,C as ut,b as mt,K as Ue,X as pt,W as ft,Y as xt,p as qe,Z as wt,_ as gt,f as yt,D as Oe,$ as U,a0 as Me,M as B,P as ce,T as _e,w as le,F as Pe,g as Xe,a1 as $e,x as Je,k as Ye,a2 as me,a3 as Le,a4 as Ve,L as Ze,j as Qe}from"./three-Hf6x_wfq.js";import{u as pe,C as bt}from"./index-_Em9n69l.js";import"./leaflet-BcfEFI1A.js";const kt=({language:N="en"})=>{var Ne,Ce,Fe,Ge,Be,He,Ke;const[Q,fe]=m.useState(!0),[$,et]=m.useState(!1),[de,tt]=m.useState(!1),[j,nt]=m.useState(!1),ee=pe(i=>i.getAllGalleryItems()),Se=pe(i=>i.texts),C=pe(i=>i.isPointerLocked),xe=pe(i=>i.setIsPointerLocked),[ze,Ae]=m.useState(!1),[We,je]=m.useState({x:0,y:0}),te=m.useRef(null),st=m.useRef(null),Re=m.useRef({x:0,y:0}),ne=m.useRef({x:0,y:0}),v=m.useRef({w:!1,a:!1,s:!1,d:!1,ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1});m.useEffect(()=>{const i=()=>{const T=window.innerWidth<=768||"ontouchstart"in window;nt(T)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const oe=m.useCallback(i=>{if(!ze||!j||!C)return;i.preventDefault();const T=i.touches[0],M=Re.current,H=T.clientX-M.x,_=T.clientY-M.y,Z=40,ie=Math.sqrt(H*H+_*_);let se=H,ue=_;ie>Z&&(se=H/ie*Z,ue=_/ie*Z),je({x:se,y:ue}),ne.current={x:se/Z,y:-ue/Z};const n=.3;v.current.w=ne.current.y>n,v.current.s=ne.current.y<-n,v.current.a=ne.current.x<-n,v.current.d=ne.current.x>n},[ze,j,C,v]),we=m.useCallback(i=>{if(!j||!C)return;i.preventDefault();const T=te.current;if(T){const M=T.getBoundingClientRect();Re.current={x:M.left+M.width/2,y:M.top+M.height/2}}Ae(!0),oe(i)},[j,C,oe]),ge=m.useCallback(()=>{j&&(Ae(!1),je({x:0,y:0}),ne.current={x:0,y:0},v.current.w=!1,v.current.s=!1,v.current.a=!1,v.current.d=!1)},[j,v]);m.useEffect(()=>{if(!j||!te.current)return;const i=te.current;return i.addEventListener("touchstart",we,{passive:!1}),i.addEventListener("touchmove",oe,{passive:!1}),i.addEventListener("touchend",ge,{passive:!1}),()=>{i.removeEventListener("touchstart",we),i.removeEventListener("touchmove",oe),i.removeEventListener("touchend",ge)}},[j,we,oe,ge]);const ye=m.useCallback(i=>{!j||!C||te.current&&te.current.contains(i.target)||document.exitPointerLock&&document.exitPointerLock()},[j,C]);m.useEffect(()=>{if(!j||!re.current)return;const i=re.current;return i.addEventListener("touchstart",ye,{passive:!0}),()=>{i.removeEventListener("touchstart",ye)}},[j,ye]);const re=m.useRef(null),Y=m.useRef(null),J=m.useRef(null),V=m.useRef(null),F=m.useRef(null),he=m.useRef(null),at=m.useRef(new lt),Ie=m.useRef(null),Ee=m.useRef([]),Te=m.useRef(null),De=m.useRef([]),ot=m.useRef(null),rt=m.useRef(null);return m.useEffect(()=>{if(!re.current)return;const i=re.current,T=n=>{const t=new $e;n.add(t),Ie.current=t;const c=32,h=64,P=new ce(c,h),u=(()=>{const w=document.createElement("canvas"),r=1024;w.width=r,w.height=r;const s=w.getContext("2d"),z="#e8e8e8",k=["#f0f0f0","#e0e0e0","#dcdcdc","#f5f5f5","#efefef"];s.fillStyle=z,s.fillRect(0,0,r,r);for(let L=0;L<2e3;L++){const b=Math.random()*r,E=Math.random()*r,O=Math.random()*8+2,K=Math.random()*.3+.1;s.globalAlpha=K,s.fillStyle=k[Math.floor(Math.random()*k.length)],s.beginPath(),s.arc(b,E,O,0,Math.PI*2),s.fill()}s.globalAlpha=.15,s.strokeStyle="#d0d0d0",s.lineWidth=1;for(let L=0;L<50;L++){const b=Math.random()*r,E=Math.random()*r,O=Math.random()*100+50,K=Math.random()*Math.PI*2;s.beginPath(),s.moveTo(b,E),s.lineTo(b+Math.cos(K)*O,E+Math.sin(K)*O),s.stroke()}const G=s.createRadialGradient(r/2,r/2,0,r/2,r/2,r/2);G.addColorStop(0,"rgba(255, 255, 255, 0.1)"),G.addColorStop(.5,"rgba(255, 255, 255, 0.05)"),G.addColorStop(1,"rgba(255, 255, 255, 0)"),s.globalAlpha=1,s.fillStyle=G,s.fillRect(0,0,r,r),s.globalAlpha=.08;for(let L=0;L<20;L++){const b=Math.random()*r,E=Math.random()*r,O=Math.random()*3+1;s.fillStyle="#00ffaa",s.beginPath(),s.arc(b,E,O,0,Math.PI*2),s.fill()}s.globalAlpha=1;const W=new Ye(w);return W.wrapS=me,W.wrapT=me,W.repeat.set(6,6),W})(),A=new Me({map:u,color:16777215,metalness:.1,roughness:.6,envMapIntensity:.8}),R=new B(P,A);R.rotation.x=-Math.PI/2,R.position.y=-2,R.receiveShadow=!0,n.add(R);const X=(()=>{const w=document.createElement("canvas"),r=1024;w.width=r,w.height=r;const s=w.getContext("2d");s.fillStyle="#f8f8f8",s.fillRect(0,0,r,r);const z=64,k=2;s.strokeStyle="#e0e0e0",s.lineWidth=k;for(let W=0;W<=r;W+=z)s.beginPath(),s.moveTo(W,0),s.lineTo(W,r),s.stroke();for(let W=0;W<=r;W+=z)s.beginPath(),s.moveTo(0,W),s.lineTo(r,W),s.stroke();const G=new Ye(w);return G.wrapS=me,G.wrapT=me,G.repeat.set(4,4),G})(),D=new B(new ce(c,h),new le({map:X,color:16777215,transparent:!1,side:Je}));D.rotation.x=Math.PI/2,D.position.y=8,D.receiveShadow=!0,n.add(D);const S=new le({color:16316664,side:Pe,transparent:!1}),I=32,f=64,e=12,o=.5,l=new B(new U(I,e,o),S);l.position.set(0,3,-32),l.receiveShadow=!0,l.castShadow=!1,t.add(l),n.add(l);const x=new B(new U(10,e,o),S);x.position.set(-11,3,32),x.receiveShadow=!0,x.castShadow=!1,t.add(x),n.add(x);const g=new B(new U(10,e,o),S);g.position.set(11,3,32),g.receiveShadow=!0,g.castShadow=!1,t.add(g),n.add(g);const d=new B(new U(o,e,f),S);d.position.set(-16,3,0),d.receiveShadow=!0,d.castShadow=!1,t.add(d),n.add(d);const y=new B(new U(o,e,f),S);y.position.set(16,3,0),y.receiveShadow=!0,y.castShadow=!1,t.add(y),n.add(y)},M=(n,t=null)=>{if(!ee||ee.length===0){for(let f=0;f<6;f++){const e=new ce(3,2),o=new le({color:6710886}),l=new B(e,o);f<3?(l.position.set(-6+f*6,3,-14.9),l.rotation.y=0):(l.position.set(-14.9,3,-6+(f-3)*6),l.rotation.y=Math.PI/2),n.add(l)}return}const c=Math.min(ee.length,20),h=2.2,P=4,p=1.6,u=async()=>{const f=[];for(let e=0;e<Math.min(ee.length,c);e++){const o=ee[e];if(o.src||o.thumbnail)try{const l=await q(o.src||o.thumbnail),x=l.width/l.height;f.push({index:e,item:o,aspectRatio:x,isPortrait:x<.8,isLandscape:x>1.3,isSquare:x>=.8&&x<=1.3})}catch{f.push({index:e,item:o,aspectRatio:1,isPortrait:!1,isLandscape:!1,isSquare:!0})}}return f},A=f=>{const e={backWall:[],rightWall:[],leftWall:[],frontWall:[]},o=f.filter(r=>r.isPortrait),l=f.filter(r=>!r.isPortrait),x=o.slice(0,3);if(e.backWall=x,x.length<3){const r=3-x.length,s=l.slice(0,r);e.backWall.push(...s),s.forEach(z=>{const k=l.indexOf(z);k>-1&&l.splice(k,1)})}const g=o.slice(3,5);if(e.frontWall=g,g.length<2){const r=2-g.length,s=l.slice(0,r);e.frontWall.push(...s),s.forEach(z=>{const k=l.indexOf(z);k>-1&&l.splice(k,1)})}const d=[...x,...g],w=[...o.filter(r=>!d.some(s=>s.index===r.index)),...l];return e.rightWall=w.slice(0,6),e.leftWall=w.slice(6,12),e},R=async()=>{const f=await u(),e=A(f),o=new _e(t||void 0),l=new Map,x=async(d,y,w)=>{const r=d.item,s=d.aspectRatio;let z,k;s>1.5?(z=Math.min(P,h*s*.8),k=z/s):s<.7?(k=h,z=k*s):(k=h*.9,z=k*s);const G=new ce(z,k),W=new Ve({color:16777215,metalness:0,roughness:.15,clearcoat:.1,clearcoatRoughness:.1,reflectivity:.3,emissive:1052688,emissiveIntensity:.02,side:Je}),L=new B(G,W),b=I(L,z,k),E=31.5,O=15.5;switch(y){case"backWall":b.position.set(-10+w*10,p,-31.5),b.rotation.y=0;break;case"rightWall":b.position.set(O,p,-27.5+w*11),b.rotation.y=-Math.PI/2;break;case"leftWall":b.position.set(-15.5,p,27.5-w*11),b.rotation.y=Math.PI/2;break;case"frontWall":w===0?b.position.set(-12,p,E):b.position.set(12,p,E),b.rotation.y=Math.PI;break}b.castShadow=!1,b.receiveShadow=!1,n.add(b),De.current.push({mesh:b,position:b.position.clone(),painting:L}),setTimeout(()=>{X(b)},100);const K=r.src||r.thumbnail;if(l.has(K))L.material.map=l.get(K),L.material.color.setHex(16777215),L.material.needsUpdate=!0;else try{await(be=>new Promise((ke,it)=>{const ve=new Image;ve.onload=()=>ke(!0),ve.onerror=()=>it(!1),ve.src=be}))(K);const ae=await new Promise((be,ke)=>{o.load(K,be,void 0,ke)});ae.generateMipmaps=!1,ae.minFilter=Ze,ae.magFilter=Ze,ae.colorSpace=qe,l.set(K,ae),L.material.map=ae,L.material.color.setHex(16777215),L.material.needsUpdate=!0}catch{L.material.color.setHex(6710886),L.material.needsUpdate=!0}},g=[...e.backWall.map((d,y)=>({data:d,wallType:"backWall",index:y})),...e.rightWall.map((d,y)=>({data:d,wallType:"rightWall",index:y})),...e.leftWall.map((d,y)=>({data:d,wallType:"leftWall",index:y})),...e.frontWall.map((d,y)=>({data:d,wallType:"frontWall",index:y}))];for(let d=0;d<g.length;d+=4){const y=g.slice(d,d+4);await Promise.all(y.map(({data:w,wallType:r,index:s})=>x(w,r,s))),d+4<g.length&&await new Promise(w=>setTimeout(w,100))}},q=f=>new Promise(e=>{const o=new Image;o.onload=()=>{e({width:o.width,height:o.height})},o.onerror=()=>{e({width:300,height:200})},o.src=f}),X=f=>{const e=new Ue(16775393,1.5,15,Math.PI/6,.15,1),o=f.position,l=f.rotation;let x=new Qe;const g=7,d=1.8;return Math.abs(l.y)<.1?x.set(o.x,g,o.z+d):Math.abs(l.y-Math.PI)<.1?x.set(o.x,g,o.z-d):Math.abs(l.y+Math.PI/2)<.1?x.set(o.x-d,g,o.z):Math.abs(l.y-Math.PI/2)<.1&&x.set(o.x+d,g,o.z),e.position.copy(x),e.target=f,e.castShadow=!1,e.userData={paintingPosition:o.clone(),baseIntensity:1,maxIntensity:8,activationDistance:6,optimalDistance:2},n.add(e),n.add(e.target),Ee.current.push(e),e},D=.05,S=.1,I=(f,e=2.5,o=2)=>{const l=new $e,x=new Ve({color:1710618,metalness:.8,roughness:.2,clearcoat:.3,clearcoatRoughness:.1,emissive:657930,emissiveIntensity:.05}),g=[new U(e+S*2,S,D),new U(e+S*2,S,D),new U(S,o,D),new U(S,o,D)],d=[{x:0,y:(o+S)/2,z:D/2},{x:0,y:-(o+S)/2,z:D/2},{x:-(e+S)/2,y:0,z:D/2},{x:(e+S)/2,y:0,z:D/2}];return g.forEach((y,w)=>{const r=new B(y,x);r.position.set(d[w].x,d[w].y,d[w].z),r.castShadow=!1,r.receiveShadow=!1,l.add(r)}),l.add(f),l};R()},H=(n,t)=>{const c=6*n,h=V.current,P=h.position.clone();(v.current.w||v.current.ArrowUp)&&t.moveForward(c),(v.current.s||v.current.ArrowDown)&&t.moveForward(-c),(v.current.d||v.current.ArrowRight)&&t.moveRight(c),(v.current.a||v.current.ArrowLeft)&&t.moveRight(-c),_(h)&&h.position.copy(P),h.position.y=1.6,Z(h.position)},_=n=>{const t=n.position,c=14.5,h=30.5;return t.x>c||t.x<-c||t.z>h||t.z<-h},Z=n=>{Ee.current.forEach(t=>{const c=t.userData;if(!c||!c.paintingPosition)return;const h=n.distanceTo(c.paintingPosition);let P=c.baseIntensity;if(h<=c.activationDistance){const p=Math.max(0,(c.activationDistance-h)/c.activationDistance),u=c.maxIntensity-c.baseIntensity,A=Math.pow(p,1.5);P=c.baseIntensity+u*A,h<=c.optimalDistance&&(P=c.maxIntensity)}t.intensity=Le.lerp(t.intensity,P,.12)}),ie(n)},ie=n=>{const t=Te.current;if(!t)return;let c=1/0;De.current.forEach(P=>{const p=n.distanceTo(P.position);p<c&&(c=p)});const h=V.current;if(h){const P=new Qe;h.getWorldDirection(P);const p=h.position.clone().add(P.multiplyScalar(10));t.target.position.copy(p),t.target.updateMatrixWorld()}if(c<=6){const p=3+Math.max(0,(6-c)/6)*12;t.intensity=Le.lerp(t.intensity,p,.1)}else t.intensity=Le.lerp(t.intensity,1.5,.1)},se=()=>{const n=V.current;if(!n)return;const t={phase1:{duration:2500,startPos:{x:0,y:1.6,z:15},endPos:{x:0,y:1.6,z:12},startLookAt:{x:0,y:8,z:0},endLookAt:{x:0,y:8,z:0}},phase2:{duration:3e3,startPos:{x:0,y:1.6,z:12},endPos:{x:0,y:1.6,z:5},startLookAt:{x:0,y:8,z:0},endLookAt:{x:0,y:4,z:0}},phase3:{duration:2e3,startPos:{x:0,y:1.6,z:5},endPos:{x:0,y:1.6,z:0},startLookAt:{x:0,y:4,z:0},endLookAt:{x:0,y:1.6,z:-1}}};n.position.set(t.phase1.startPos.x,t.phase1.startPos.y,t.phase1.startPos.z),n.lookAt(t.phase1.startLookAt.x,t.phase1.startLookAt.y,t.phase1.startLookAt.z);let c=1,h=Date.now();const P=u=>{const A=Date.now()-h,R=Math.min(A/u.duration,1),q=R<.5?4*R*R*R:1-Math.pow(-2*R+2,3)/2;n.position.x=u.startPos.x+(u.endPos.x-u.startPos.x)*q,n.position.y=u.startPos.y+(u.endPos.y-u.startPos.y)*q,n.position.z=u.startPos.z+(u.endPos.z-u.startPos.z)*q;const X={x:u.startLookAt.x+(u.endLookAt.x-u.startLookAt.x)*q,y:u.startLookAt.y+(u.endLookAt.y-u.startLookAt.y)*q,z:u.startLookAt.z+(u.endLookAt.z-u.startLookAt.z)*q};return n.lookAt(X.x,X.y,X.z),R>=1},p=()=>{let u=!1;switch(c){case 1:u=P(t.phase1),u&&(c=2,h=Date.now());break;case 2:u=P(t.phase2),u&&(c=3,h=Date.now());break;case 3:if(u=P(t.phase3),u){et(!0),fe(!1),setTimeout(()=>{tt(!0)},9e3),F.current&&(F.current.getObject().position.copy(n.position),F.current.connect=F.current.connect.__original||F.current.connect);return}break}ot.current=requestAnimationFrame(p)};p()};return(()=>{try{const n=new dt;rt.current=n,n.onLoad=()=>{requestAnimationFrame(()=>{J.current&&Y.current&&V.current?(J.current.render(Y.current,V.current),requestAnimationFrame(()=>{setTimeout(()=>{se()},300)})):setTimeout(()=>{se()},500)})},n.onError=()=>{};const t=new ht;t.background=new ut(1710618),Y.current=t;const c=new mt(75,i.clientWidth/i.clientHeight,.1,1e3);c.position.set(0,1.6,0),V.current=c;const h=new Ue(16774374,6,15,Math.PI/5,.15,1.2);h.position.set(0,0,0),h.castShadow=!1;const P=new pt;h.target=P,c.add(h),t.add(P),t.add(c),Te.current=h;const p=new ft({antialias:!0,alpha:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1});if(p.setSize(i.clientWidth,i.clientHeight),p.setClearColor(15790320,1),p.shadowMap.enabled=!0,p.shadowMap.type=xt,p.outputColorSpace=qe,p.toneMapping=wt,p.toneMappingExposure=1,!p.getContext())throw new Error("WebGL context creation failed");i.appendChild(p.domElement),J.current=p;const A=new gt(c,p.domElement);t.add(A.getObject()),F.current=A,A.addEventListener("lock",()=>{xe(!0)}),A.addEventListener("unlock",()=>{xe(!1)});const R=A.connect;A.connect.__original=R,A.connect=()=>{$&&R.call(A)};const q=I=>{const f=new yt(6316128,1.2);I.add(f);const e=new Oe(16777215,.9);e.position.set(0,12,5),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.5,e.shadow.camera.far=25,e.shadow.camera.left=-25,e.shadow.camera.right=25,e.shadow.camera.top=25,e.shadow.camera.bottom=-25,I.add(e);const o=new Oe(16777215,.2);return o.position.set(-10,8,-10),I.add(o),[f,e,o]},X=I=>{const e=(()=>{const g=new U(12,12,.4),d=new Me({color:16777215,emissive:16777215,emissiveIntensity:2}),y=new B(g,d);y.position.set(0,3,31.8),I.add(y);const r=(()=>{const G=new ce(11,9),W="/gallery/Image_2025-08-11_154142_853.jpg",L=new _e,b=new le({color:4474111,emissive:2236996,emissiveIntensity:.3,transparent:!1,opacity:1,side:Pe}),E=new B(G,b);return E.position.set(0,3,32-.4-.02),E.rotation.y=Math.PI,E.name="BaguaAdvertisement",I.add(E),L.load(W,O=>{const K=new le({map:O,emissive:2236962,emissiveIntensity:.25,transparent:!1,opacity:1,side:Pe});E.material=K},()=>{},()=>{}),E})();return[{pos:[0,3,32-.4-.8],intensity:1.8}].forEach(z=>{const k=new Xe(16777198,z.intensity,12);k.position.set(...z.pos),k.decay=1.8,I.add(k)}),{lightBox:y,lightboxAd:r}})();return{wallLightBox:e.lightBox,lightboxAd:e.lightboxAd}},D=()=>{const I=[];return[{start:{x:-3,z:2.25},end:{x:3,z:2.25},name:"王-上横"},{start:{x:-2.5,z:0},end:{x:2.5,z:0},name:"王-中横"},{start:{x:-3.5,z:-2.25},end:{x:3.5,z:-2.25},name:"王-下横"},{start:{x:0,z:2.25},end:{x:0,z:-2.25},name:"王-竖线"}].forEach(e=>{const o=Math.sqrt(Math.pow(e.end.x-e.start.x,2)+Math.pow(e.end.z-e.start.z,2));let l;e.name.includes("竖")?l=new U(.4,.2,o):l=new U(o,.2,.4);const x=new Me({color:16777215,emissive:16777215,emissiveIntensity:2,transparent:!1}),g=new B(l,x),d=(e.start.x+e.end.x)/2,y=(e.start.z+e.end.z)/2;g.position.set(d,6,y),t.add(g);const w=new Xe(16777215,7,45);w.position.set(d,5.5,y),t.add(w),I.push({tube:g,name:e.name})}),I};q(t),X(t),D(),T(t),M(t,n);const S=()=>{he.current=requestAnimationFrame(S);const I=at.current.getDelta();A.isLocked&&H(I,A),p.render(t,c)};S(),fe(!1)}catch(n){throw fe(!1),n}})(),()=>{he.current&&(cancelAnimationFrame(he.current),he.current=null),F.current&&(F.current.dispose(),F.current=null),Y.current&&(Y.current.traverse(n=>{n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(t=>{t.map&&t.map.dispose(),t.normalMap&&t.normalMap.dispose(),t.roughnessMap&&t.roughnessMap.dispose(),t.dispose()}):(n.material.map&&n.material.map.dispose(),n.material.normalMap&&n.material.normalMap.dispose(),n.material.roughnessMap&&n.material.roughnessMap.dispose(),n.material.dispose()))}),Y.current.clear(),Y.current=null),J.current&&(i&&i.contains(J.current.domElement)&&i.removeChild(J.current.domElement),J.current.dispose(),J.current=null),V.current=null,Ie.current=null}},[ee,$,xe]),m.useEffect(()=>{const i=M=>{var _;const H=M.code==="KeyW"?"w":M.code==="KeyA"?"a":M.code==="KeyS"?"s":M.code==="KeyD"?"d":M.key.toLowerCase();H in v.current&&(v.current[H]=!0),M.key==="Escape"&&((_=F.current)!=null&&_.isLocked)&&F.current.unlock()},T=M=>{const H=M.code==="KeyW"?"w":M.code==="KeyA"?"a":M.code==="KeyS"?"s":M.code==="KeyD"?"d":M.key;H in v.current&&(v.current[H]=!1)};return document.addEventListener("keydown",i),document.addEventListener("keyup",T),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",T)}},[]),a.jsxs("section",{id:"gallery",className:"min-h-screen flex flex-col justify-center items-center bg-gray-100 relative overflow-hidden",children:[(Q||!$)&&a.jsx(bt,{size:160,strokeWidth:12,showMask:!0,maskColor:"black-solid"}),a.jsxs("div",{ref:re,className:`w-full h-screen relative bg-gray-200 ${Q||!$?"invisible":"visible"}`,style:{minHeight:"100vh"},children:[j&&C&&a.jsx("div",{ref:te,className:"fixed bottom-6 left-6 w-20 h-20 bg-white/10 border border-white/20 rounded-full backdrop-blur-md shadow-lg flex items-center justify-center touch-none z-50 select-none",style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:a.jsx("div",{ref:st,className:"w-8 h-8 bg-white/30 rounded-full border border-white/40 transition-transform duration-75",style:{transform:`translate(${We.x}px, ${We.y}px)`}})}),j&&C&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50",children:a.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-lg px-4 py-2 text-white text-sm border border-white/10",children:N==="zh"?"触摸屏幕退出长廊":"Touch screen to exit gallery"})})]}),a.jsxs("div",{className:`absolute bottom-6 left-6 bg-black/50 backdrop-blur-md rounded-xl p-4 text-white z-20 max-w-sm transition-all duration-1000 ${!Q&&$&&de&&!C?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:[a.jsx("p",{className:"text-lg font-medium mb-3",children:N==="zh"?"如何操作？":"How to Play?"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),N==="zh"?"点击进入长廊":"Tap to enter the gallery"]}),j?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),N==="zh"?"拖拽屏幕 - 环视周围，探索画作":"Drag screen - Look around and explore"]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),N==="zh"?"左下摇杆 - 移动穿行长廊":"Virtual joystick - Move through gallery"]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 mr-2 bg-white/20 rounded text-xs font-mono border border-white/30",children:N==="zh"?"触屏":"Touch"}),a.jsx("span",{children:N==="zh"?"退出长廊模式":"Exit gallery mode"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),N==="zh"?"鼠标 - 环视周围，探索画作":"Mouse - Look around and explore"]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),a.jsxs("span",{className:"inline-flex items-center gap-1 mr-2",children:[a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-white/20 rounded text-xs font-mono border border-white/30",children:"W"}),a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-white/20 rounded text-xs font-mono border border-white/30",children:"A"}),a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-white/20 rounded text-xs font-mono border border-white/30",children:"S"}),a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-white/20 rounded text-xs font-mono border border-white/30",children:"D"})]}),a.jsx("span",{children:N==="zh"?"移动穿行长廊":"Move through the gallery"})]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx("span",{className:"w-2"}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 mr-2 bg-white/20 rounded text-xs font-mono border border-white/30",children:"ESC"}),a.jsx("span",{children:N==="zh"?"退出指针锁定模式":"Exit pointer lock mode"})]})]})]})]}),a.jsx("div",{className:`absolute inset-0 flex items-center justify-center cursor-pointer z-10 transition-all duration-1000 ${!Q&&$&&de&&!C?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,onClick:()=>{var i;!Q&&$&&de&&!C&&((i=F.current)==null||i.lock())},onTouchStart:i=>{var T;i.preventDefault(),!Q&&$&&de&&!C&&((T=F.current)==null||T.lock())},children:a.jsxs("div",{className:`bg-white/10 backdrop-blur-md rounded-2xl p-8 text-center transition-all duration-300 border border-white/20 ${j?"active:bg-white/20 active:scale-95":"hover:bg-white/20 hover:scale-105"}`,children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:((Fe=(Ce=(Ne=Se[N])==null?void 0:Ne.gallery)==null?void 0:Ce.gallery3D)==null?void 0:Fe.title)||"浮生长廊"}),a.jsx("p",{className:"text-white/80 mb-6",children:j?N==="zh"?"触摸进入":"Tap to Start":((Ke=(He=(Be=(Ge=Se[N])==null?void 0:Ge.gallery)==null?void 0:Be.gallery3D)==null?void 0:He.instructions)==null?void 0:Ke.clickToStart)||"点击进入"}),a.jsx("div",{className:"animate-bounce",children:a.jsxs("svg",{className:"w-8 h-8 text-white mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})}),C&&a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full shadow-lg border border-white/30"}),a.jsx("div",{className:"absolute w-6 h-0.5 bg-white/60 rounded shadow-sm"}),a.jsx("div",{className:"absolute w-0.5 h-6 bg-white/60 rounded shadow-sm"}),a.jsx("div",{className:"absolute w-8 h-8 border border-white/20 rounded-full"})]})]})};kt.propTypes={language:ct.string};export{kt as default};
