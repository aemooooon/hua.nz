import{r as l,j as h,F as Ne,a as je}from"./react-N-_5-tx-.js";import{l as ve,P as g}from"./vendor-RxfllKF0.js";import{u as me}from"./about-DSKkw8Zk.js";import{h as $e,i as Oe,W as De,N as Re,k as Te,A as Be,v as ue,P as Ee,w as He,x as ee,F as te,s as Ce,q as oe,M as Fe,V as Ve,r as Ue}from"./three-CFp4aWDs.js";import{g as We}from"./gsap-CH_iu5NA.js";import{t as Se}from"./texture-system-m4t6Dn8a.js";import{C as Ye}from"./gallery-u6ZtjdFD.js";class qe{constructor(){this.activeResources=new Map,this.resourceCounter=0,this.isPageVisible=!document.hidden,this.lastActivityTime=Date.now(),this.initPageVisibilityListener(),this.initActivityListener()}initPageVisibilityListener(){typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isPageVisible=!document.hidden,this.isPageVisible&&(this.refreshActiveResources(),this.lastActivityTime=Date.now())})}initActivityListener(){if(typeof document<"u"){const e=()=>{this.lastActivityTime=Date.now()};document.addEventListener("mousemove",e,{passive:!0}),document.addEventListener("mousedown",e,{passive:!0}),document.addEventListener("keydown",e,{passive:!0}),document.addEventListener("scroll",e,{passive:!0}),document.addEventListener("touchstart",e,{passive:!0})}}refreshActiveResources(){const e=Date.now();for(const[,t]of this.activeResources)t.persistent||(t.timestamp=e)}registerResources(e,t,r={}){const s=`${e}_${this.resourceCounter++}`;return this.activeResources.set(s,{componentId:e,resources:t,timestamp:Date.now(),persistent:r.persistent||!1}),s}cleanupByComponent(e){const t=[];for(const[r,s]of this.activeResources)s.componentId===e&&(this.disposeResources(s.resources),t.push(r));t.forEach(r=>this.activeResources.delete(r))}cleanup(e){const t=this.activeResources.get(e);t&&(this.disposeResources(t.resources),this.activeResources.delete(e))}disposeResources(e){e&&(e.renderer&&(e.renderer.dispose(),e.renderer.info&&e.renderer.info.reset()),e.scene&&this.disposeScene(e.scene),e.geometry&&(Array.isArray(e.geometry)?e.geometry.forEach(t=>t.dispose()):e.geometry.dispose()),e.materials&&(Array.isArray(e.materials)?e.materials.forEach(t=>this.disposeMaterial(t)):this.disposeMaterial(e.materials)),e.textures&&(Array.isArray(e.textures)?e.textures.forEach(t=>t.dispose()):e.textures.dispose()),e.gl&&e.gl.getExtension&&(e.buffers&&Object.values(e.buffers).forEach(t=>{t&&e.gl.deleteBuffer(t)}),e.programs&&Object.values(e.programs).forEach(t=>{t&&e.gl.deleteProgram(t)})))}disposeScene(e){if(e)for(e.traverse(t=>{t.geometry&&t.geometry.dispose(),t.material&&this.disposeMaterial(t.material),t.texture&&t.texture.dispose()});e.children.length>0;)e.remove(e.children[0])}disposeMaterial(e){if(e){if(Array.isArray(e)){e.forEach(t=>this.disposeMaterial(t));return}Object.keys(e).forEach(t=>{const r=e[t];r&&typeof r.dispose=="function"&&(r.image&&r.image.tagName==="VIDEO"&&(r.image.pause(),r.image.src="",r.image.load()),r.dispose())}),e.dispose()}}forceCleanupAll(){console.warn("üö® Âº∫Âà∂Ê∏ÖÁêÜÊâÄÊúâWebGLËµÑÊ∫ê");for(const[,e]of this.activeResources)this.disposeResources(e.resources);this.activeResources.clear(),typeof window<"u"&&window.gc&&setTimeout(()=>window.gc(),100)}getMemoryInfo(){const t={activeResourceGroups:this.activeResources.size,timestamp:Date.now(),persistentResources:0,temporaryResources:0,sectionBreakdown:{}};for(const[r,s]of this.activeResources){s.persistent?t.persistentResources++:t.temporaryResources++;const f=s.componentId;t.sectionBreakdown[f]||(t.sectionBreakdown[f]={count:0,persistent:0,temporary:0,resourceIds:[],lastActive:s.timestamp}),t.sectionBreakdown[f].count++,t.sectionBreakdown[f].resourceIds.push(r),t.sectionBreakdown[f].lastActive=Math.max(t.sectionBreakdown[f].lastActive,s.timestamp),s.persistent?t.sectionBreakdown[f].persistent++:t.sectionBreakdown[f].temporary++}return typeof window<"u"&&window.performance&&window.performance.memory&&(t.jsHeapSize=Math.round(window.performance.memory.usedJSHeapSize/1024/1024),t.jsHeapLimit=Math.round(window.performance.memory.totalJSHeapSize/1024/1024)),t.resourceStats=this.getResourceTypeStats(),t}getResourceTypeStats(){const e={renderers:0,scenes:0,geometries:0,materials:0,textures:0,webglContexts:0,canvas2dContexts:0};for(const[,t]of this.activeResources){const r=t.resources;r.renderer&&e.renderers++,r.scene&&e.scenes++,r.gl&&e.webglContexts++,r.context2d&&e.canvas2dContexts++,r.geometry&&(e.geometries+=Array.isArray(r.geometry)?r.geometry.length:1),r.materials&&(e.materials+=Array.isArray(r.materials)?r.materials.length:1),r.textures&&(e.textures+=Array.isArray(r.textures)?r.textures.length:1)}return e}cleanupOldResources(e=3e5){if(this.isPageVisible||this.hasRecentActivity())return;const t=Date.now(),r=[];for(const[s,f]of this.activeResources){if(f.persistent)continue;const E=f.componentId&&f.componentId.includes("BackgroundCanvas")?18e5:e;t-f.timestamp>E&&(this.disposeResources(f.resources),r.push(s))}r.forEach(s=>this.activeResources.delete(s))}hasRecentActivity(){return typeof window<"u"?Date.now()-(this.lastActivityTime||0)<3e5:!1}getDebugInfo(){const e=Date.now(),t=[];for(const[r,s]of this.activeResources)t.push({id:r,componentId:s.componentId,persistent:s.persistent,age:Math.round((e-s.timestamp)/1e3),isBackgroundCanvas:s.componentId&&s.componentId.includes("BackgroundCanvas")});return{totalResources:this.activeResources.size,isPageVisible:this.isPageVisible,hasRecentActivity:this.hasRecentActivity(),lastActivityAge:Math.round((e-(this.lastActivityTime||0))/1e3),resources:t}}cleanupOtherSections(e,t=[]){if(!e)return;const r=new Set([e,...t]),s=[];let f=0;for(const[E,i]of this.activeResources)i.persistent||r.has(i.componentId)||(this.disposeResources(i.resources),s.push(E),f++);return s.forEach(E=>this.activeResources.delete(E)),f}}const Z=new qe;typeof window<"u"&&setInterval(()=>{Z.cleanupOldResources()},3e5);const H={"nz-blue":{name:{en:"New Zealand Blue",zh:"Êñ∞Ë•øÂÖ∞Ëìù"},description:{en:"Inspired by New Zealand's coastal beauty",zh:"ÁÅµÊÑüÊù•Ëá™Êñ∞Ë•øÂÖ∞Êµ∑Â≤∏‰πãÁæé"},icon:"üá≥üáø",colors:{primary:"#00ffff",secondary:"#0080ff",accent:"#4dd0e1",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1e7ef","text-muted":"#888888",border:"#00ffff",divider:"#00ffff",hover:"rgba(0, 255, 255, 0.1)",button:"rgba(0, 255, 255, 0.6)",loading:"#00ffff",glow:"#00ffff",shadow:"rgba(0, 255, 255, 0.5)",cursor:"#00ffff","avatar-glow":"#00ffff",success:"#00ff00",warning:"#ffff00",error:"#ff0000","gradient-from":"#0080ff","gradient-via":"#00ffff","gradient-to":"#4dd0e1"}},"si-green":{name:{en:"South Island Green",zh:"ÁªøÊÑèÂçóÂ≤õ"},description:{en:"Inspired by South Island's lush landscapes",zh:"ÁÅµÊÑüÊù•Ëá™ÂçóÂ≤õÁöÑËåÇÂØÜÊôØËßÇ"},icon:"üèîÔ∏è",colors:{primary:"#10b981",secondary:"#059669",accent:"#4ade80",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1f5fe","text-muted":"#888888",border:"#10b981",divider:"#10b981",hover:"rgba(16, 185, 129, 0.1)",button:"rgba(16, 185, 129, 0.6)",loading:"#10b981",glow:"#10b981",shadow:"rgba(16, 185, 129, 0.5)",cursor:"#10b981","avatar-glow":"#10b981",success:"#10b981",warning:"#ffff00",error:"#ff0000","gradient-from":"#059669","gradient-via":"#10b981","gradient-to":"#4ade80"}}},ze=()=>{const{theme:d,setTheme:e}=me(),t=i=>{const v=H[i];if(!v)return;const y=document.documentElement;Object.entries(v.colors).forEach(([m,M])=>{if(y.style.setProperty(`--theme-${m}`,M),m==="primary"||m==="secondary"){const T=r(M);T&&y.style.setProperty(`--theme-${m}-rgb`,`${T.r}, ${T.g}, ${T.b}`)}}),y.className=y.className.replace(/theme-\w+/g,""),y.classList.add(`theme-${i}`),e(i)},r=i=>{const v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null},s=()=>{const i=Object.keys(H),y=(i.indexOf(d)+1)%i.length;t(i[y])},f=()=>H[d]||H["nz-blue"],E=()=>Object.entries(H).map(([i,v])=>({key:i,...v}));return l.useEffect(()=>{const i=H[d]?d:"nz-blue";if(i!==d){e(i);return}const v=H[i];if(!v)return;const y=document.documentElement;Object.entries(v.colors).forEach(([m,M])=>{if(y.style.setProperty(`--theme-${m}`,M),m==="primary"||m==="secondary"){const T=r(M);T&&y.style.setProperty(`--theme-${m}-rgb`,`${T.r}, ${T.g}, ${T.b}`)}}),y.className=y.className.replace(/theme-\w+/g,""),y.classList.add(`theme-${i}`)},[d,e]),{theme:d,applyTheme:t,toggleTheme:s,getCurrentTheme:f,getAllThemes:E,getThemeColors:()=>f().colors,themes:H}},Me=({enableOpeningAnimation:d=!1,onAnimationComplete:e,onReady:t})=>{const r=l.useRef(),s=l.useRef(),f=l.useRef(),E=l.useRef({x:0,y:0}),i=l.useRef({x:0,y:0}),v=l.useRef({x:0,y:0}),y=l.useRef({x:0,y:0,z:0}),m=l.useRef({x:0,y:0,z:0}),M=l.useRef(performance.now()),T=l.useRef(!1),j=l.useRef(null),{getNewContent:q,getSectionsData:V}=me(),U=q(),{getThemeColors:$}=ze(),C=$(),N=l.useCallback(()=>Math.max(window.innerWidth,window.innerHeight),[]),[D,S]=l.useState(!1),A=l.useMemo(()=>V().map(b=>{var a;return{...b.faces,label:((a=U.navigation)==null?void 0:a[b.id])||b.faces.label}}),[U.navigation,V]);l.useEffect(()=>{(async()=>{try{console.log("üöÄ ÂºÄÂßãHero CubeÁ∫πÁêÜÈ¢ÑÂä†ËΩΩ...");const b=await Se.loadHeroCubeTextures(A);console.log("‚úÖ Hero CubeÁ∫πÁêÜÂä†ËΩΩÂÆåÊàê!"),console.log(`  - ÂõæÁâáÁ∫πÁêÜ: ${b.textures.size}`),console.log(`  - ËßÜÈ¢ëÁ∫πÁêÜ: ${b.videos.size}`),console.log(`  - ÈîôËØØÊï∞Èáè: ${b.errors.length}`),b.errors.length>0&&console.warn("‚ö†Ô∏è ÈÉ®ÂàÜÁ∫πÁêÜÂä†ËΩΩÂ§±Ë¥•:",b.errors),j.current=b,console.log("üîç Ë∞ÉËØïÈ¢ÑÂä†ËΩΩÁªìÊûú:"),console.log("  - Á∫πÁêÜMapÈîÆ:",Array.from(b.textures.keys())),console.log("  - ËßÜÈ¢ëMapÈîÆ:",Array.from(b.videos.keys())),console.log("  - facesÈÖçÁΩÆ:",A.map(a=>({name:a.name,hasVideo:!!a.video,hasTexture:!!a.texture}))),S(!0)}catch(b){console.warn("Á∫πÁêÜÈ¢ÑÂä†ËΩΩÈÉ®ÂàÜÂ§±Ë¥•ÔºåÁªßÁª≠Ê∏≤Êüì:",b),S(!0)}})()},[A]),l.useEffect(()=>{const O=()=>{var c;if((c=r.current)!=null&&c.firstChild){const G=r.current.firstChild;G.style.width="100vw",G.style.height="100vh"}},b=()=>{Z.isPageVisible&&Z.refreshActiveResources()},a=["mousedown","mousemove","keydown","scroll","touchstart"];window.addEventListener("resize",O);const J=ve.debounce(b,3e4);return a.forEach(c=>{document.addEventListener(c,J)}),()=>{window.removeEventListener("resize",O),a.forEach(c=>{document.removeEventListener(c,J)})}},[N]);const B=l.useRef(C),re=l.useRef(e),ne=l.useRef(t);return l.useEffect(()=>{B.current=C},[C]),l.useEffect(()=>{re.current=e},[e]),l.useEffect(()=>{ne.current=t},[t]),l.useEffect(()=>{if(!D)return;const O=r.current;if(!O)return;const b=new $e,a=new Oe(50,1,.1,1e3);a.position.z=10;const J=window.innerWidth*window.innerHeight<1920*1080,c=new De({alpha:!0,antialias:J,powerPreference:"high-performance",precision:"lowp",stencil:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1});c.setClearColor(0,0),c.setSize(window.innerWidth,window.innerHeight),c.setPixelRatio(Math.min(window.devicePixelRatio,1)),c.shadowMap.enabled=!1,c.physicallyCorrectLights=!1,c.toneMapping=Re,c.domElement.style.position="fixed",c.domElement.style.top="0",c.domElement.style.left="0",c.domElement.style.width="100vw",c.domElement.style.height="100vh",c.domElement.style.display="block",c.domElement.style.zIndex="10",c.domElement.style.pointerEvents="none",c.domElement.setAttribute("data-no-custom-cursor","true"),c.domElement.setAttribute("data-hero-cube-canvas","true"),c.domElement.classList.add("hero-cube-canvas"),c.setSize(window.innerWidth,window.innerHeight),a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),c.shadowMap.enabled=!1,c.physicallyCorrectLights=!1,c.toneMapping=Re,c.toneMappingExposure=1,c.outputColorSpace=Te,O.appendChild(c.domElement);const G=ve.debounce(()=>{if(c&&a){const o=window.innerWidth,R=window.innerHeight;c.setSize(o,R),a.aspect=o/R,a.updateProjectionMatrix()}},100);window.addEventListener("resize",G);const Le=new Be(16777215,.8);b.add(Le);const se=new ue(16777215,1.2);se.position.set(5,5,5),se.castShadow=!0,b.add(se);const fe=new ue(1096065,.6);fe.position.set(-5,2,-3),b.add(fe);const pe=new ue(3462041,.5);pe.position.set(3,-4,5),b.add(pe);const he=new Ee(14742240,1.5,15);he.position.set(0,0,8),b.add(he);const ge=new Ee(65416,.8,20);ge.position.set(0,0,-10),b.add(ge);const ie=2.8,xe=new He(ie,ie,ie,8,.1),ae=(o=256)=>{const R=document.createElement("canvas");R.width=o,R.height=o;const w=R.getContext("2d"),u=o/8;for(let L=0;L<8;L++)for(let I=0;I<8;I++)w.fillStyle=(L+I)%2===0?B.current.surface:B.current.muted,w.fillRect(L*u,I*u,u,u);w.fillStyle=B.current.primary,w.font=`bold ${o/16}px Arial`,w.textAlign="center",w.textBaseline="middle",w.fillText("VIDEO",o/2,o/2-o/32),w.fillText("ERROR",o/2,o/2+o/32);const p=new Ce(R);return p.needsUpdate=!0,p},ce=[A.find(o=>o.name==="about"),A.find(o=>o.name==="gallery"),A.find(o=>o.name==="contact"),A.find(o=>o.name==="education"),A.find(o=>o.name==="home"),A.find(o=>o.name==="projects")].map((o,R)=>{var Q,K;if(console.log(`Face ${R} (${["right","left","top","bottom","front","back"][R]}):`,o?o.name:"NOT FOUND",o),!o){console.error(`Face at index ${R} not found!`);const Y=ae(256);return new ee({map:Y,transparent:!1,side:te})}if(o.video){const Y=ae(256),P=new ee({map:Y,transparent:!1,side:te});if((Q=j.current)!=null&&Q.videos.has(o.name)){const x=j.current.videos.get(o.name);if(P.map=x,P.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ: ${o.name}`),x.image){const z=x.image;console.log(`üé¨ ËßÜÈ¢ëÁä∂ÊÄÅ: ${o.name}`,{paused:z.paused,currentTime:z.currentTime,duration:z.duration,readyState:z.readyState,networkState:z.networkState}),z.paused&&z.play().catch(X=>console.warn("ËßÜÈ¢ëËá™Âä®Êí≠ÊîæÂ§±Ë¥•:",X));const k=()=>{z.paused&&z.play().then(()=>{console.log(`üé¨ Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÂºÄÂßãÊí≠Êîæ: ${o.name}`),document.removeEventListener("click",k),document.removeEventListener("touchstart",k)}).catch(X=>console.warn("Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÊí≠ÊîæÂ§±Ë¥•:",X))};z.paused&&(document.addEventListener("click",k,{once:!0}),document.addEventListener("touchstart",k,{once:!0}))}}else{console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ‰∏çÂèØÁî®ÔºåÂàõÂª∫Êñ∞ÁöÑ: ${o.name}`);const x=document.createElement("video");x.src=o.video,x.crossOrigin="anonymous",x.loop=!0,x.muted=!0,x.autoplay=!0,x.playsInline=!0,x.preload="metadata";const z=()=>{try{const k=new Ve(x);k.minFilter=oe,k.magFilter=oe,k.format=Ue,k.generateMipmaps=!1,k.flipY=!0,k.colorSpace=Te,P.map&&P.map!==Y&&P.map.dispose(),P.map=k,P.needsUpdate=!0,x.play().catch(X=>{console.warn("Video autoplay failed:",X)})}catch(k){console.warn("Failed to create video texture:",k)}};x.addEventListener("loadeddata",()=>{z()}),x.addEventListener("canplay",()=>{z()}),x.addEventListener("loadedmetadata",()=>{x.play().catch(()=>{})}),x.addEventListener("error",k=>{console.warn("Video loading error, using fallback texture:",k)}),x.load()}return P}if(o.texture){const Y=ae(256),P=new ee({map:Y,transparent:!1,side:te});if((K=j.current)!=null&&K.textures.has(o.texture)){const x=j.current.textures.get(o.texture);o.texture==="education"&&(x.flipY=!0,x.needsUpdate=!0,console.log(`üîÑ ‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),P.map=x,P.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩÁ∫πÁêÜ: ${o.texture}`)}else console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩÁ∫πÁêÜ‰∏çÂèØÁî®Ôºå‰ΩøÁî®Áªü‰∏ÄÁ≥ªÁªüÂºÇÊ≠•Âä†ËΩΩ: ${o.texture}`),(async()=>{try{const x=await Se.loadSceneTextures("hero-cube",{textures:[o.texture]});if(x.textures.has(o.texture)){const z=x.textures.get(o.texture);o.texture==="education"&&(z.flipY=!0,z.needsUpdate=!0,console.log(`üîÑ ÂºÇÊ≠•Âä†ËΩΩÊó∂‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),P.map=z,P.needsUpdate=!0,console.log(`‚úÖ ÂçïÁã¨Âä†ËΩΩCubeÁ∫πÁêÜÊàêÂäü: ${o.texture}`)}else throw new Error(`Á∫πÁêÜÊú™ÊâæÂà∞: ${o.texture}`)}catch(x){console.warn(`Âä†ËΩΩÁ∫πÁêÜÂ§±Ë¥•: ${o.texture}`,x)}})();return P}const w=document.createElement("canvas"),u=256;w.width=u,w.height=u;const p=w.getContext("2d");p.clearRect(0,0,u,u);const L=p.createRadialGradient(u/2,u/2,0,u/2,u/2,u/2);L.addColorStop(0,`${o.color}25`),L.addColorStop(.6,`${o.color}15`),L.addColorStop(1,`${o.color}08`),p.fillStyle=L,p.fillRect(0,0,u,u),p.strokeStyle=`${o.color}60`,p.lineWidth=2;const I=u*.05;p.strokeRect(I,I,u-I*2,u-I*2);const W=p.createLinearGradient(0,0,u,u);W.addColorStop(0,"rgba(255, 255, 255, 0.15)"),W.addColorStop(.5,"rgba(255, 255, 255, 0.08)"),W.addColorStop(1,"rgba(255, 255, 255, 0)"),p.fillStyle=W,p.fillRect(0,0,u/3,u),p.shadowColor="rgba(0, 0, 0, 0.8)",p.shadowBlur=6;const le=36;p.font=`bold ${le}px "Helvetica Neue", Arial`,p.fillStyle=B.current.text||"#ffffff",p.textAlign="center",p.textBaseline="middle",p.fillText(o.label,u/2,u/2),p.shadowColor="transparent",p.shadowBlur=0,p.shadowOffsetX=0,p.shadowOffsetY=0;const F=new Ce(w);return F.needsUpdate=!0,F.generateMipmaps=!1,F.minFilter=oe,F.magFilter=oe,new ee({map:F,transparent:!1,side:te})}),n=new Fe(xe,ce);b.add(n),s.current=n,d?(n.position.set(0,0,-80),n.scale.set(.05,.05,.05),n.rotation.set(0,0,0),f.current=We.timeline({onComplete:()=>{re.current&&re.current(),window.dispatchEvent(new CustomEvent("cubeAnimationComplete"))}}).to(n.position,{z:0,duration:2,ease:"power3.out",delay:.5}).to(n.scale,{x:1.2,y:1.2,z:1.2,duration:2,ease:"back.out(1.7)"},.5).to(n.scale,{x:1.4,y:1.4,z:1.4,duration:.5,ease:"power2.out"},2.5).to(n.rotation,{x:-Math.PI*.5,y:0,z:0,duration:1.5,ease:"power3.out"},2.5).to(a.position,{x:0,y:0,z:5,duration:1.5,ease:"power3.out",onUpdate:()=>a.lookAt(n.position)},2.5).to(n.rotation,{x:0,y:Math.PI*.5,z:Math.PI,duration:1.5,ease:"power2.inOut"},5.5).to(a.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>a.lookAt(n.position)},5.5).to(n.rotation,{x:0,y:Math.PI,z:Math.PI,duration:1.5,ease:"power2.inOut"},8.5).to(a.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>a.lookAt(n.position)},8.5).to(n.rotation,{x:0,y:-Math.PI*.5,z:Math.PI,duration:1.5,ease:"power2.inOut"},11.5).to(a.position,{x:0,y:0,z:5,duration:1.5,ease:"power2.inOut",onUpdate:()=>a.lookAt(n.position)},11.5).to(n.rotation,{x:0,y:0,z:0,duration:1.5,ease:"power2.inOut"},14.5).to(a.position,{x:0,y:0,z:5,duration:.5,ease:"power2.out",onUpdate:()=>a.lookAt(n.position)},17.5).to(n.rotation,{x:Math.PI*.5,y:Math.PI,z:0,duration:.5,ease:"power2.out"},17.5).to(a.position,{x:0,y:0,z:5,duration:.5,ease:"power2.out",onUpdate:()=>a.lookAt(n.position)},20.5).to(a.position,{x:0,y:2,z:6,duration:.7,ease:"power2.inOut",onUpdate:()=>a.lookAt(n.position)},20.5).to(a.position,{x:0,y:0,z:10,duration:.8,ease:"power2.out",onUpdate:()=>a.lookAt(n.position)},21.2).to(n.scale,{x:3,y:3,z:3,duration:1.7,ease:"power3.in"},22).to(a.position,{z:2,duration:1.7,ease:"power3.in",onUpdate:()=>a.lookAt(n.position)},22).to(n.rotation,{x:n.rotation.x+Math.PI*4,y:n.rotation.y+Math.PI*6,z:n.rotation.z+Math.PI*3,duration:1.7,ease:"power2.out"},22).to(n.scale,{x:1,y:1,z:1,duration:1.8,ease:"power2.out"},23.7).to(a.position,{z:10,duration:.5,ease:"power2.out",onUpdate:()=>a.lookAt(n.position)},23.7).to(n.rotation,{x:-Math.PI*.81,y:Math.PI*.25,z:0,duration:1.8,ease:"power2.out"},23.7).to(n.scale,{x:1.15,y:1.15,z:1.15,duration:.2,ease:"power2.out"},26).to(n.scale,{x:1,y:1,z:1,duration:.3,ease:"bounce.out"},26.2).to(n.scale,{x:1.08,y:1.08,z:1.08,duration:.15,ease:"power2.out"},26.6).to(n.scale,{x:1,y:1,z:1,duration:.25,ease:"bounce.out"},26.75).to(n.scale,{x:1.04,y:1.04,z:1.04,duration:.1,ease:"power2.out"},27.1).to(n.scale,{x:1,y:1,z:1,duration:.4,ease:"elastic.out(1, 0.3)"},27.2)):n.rotation.set(-Math.PI*.81,Math.PI*.25,0);const ye=o=>{const R=o.clientX/window.innerWidth*2-1,w=-(o.clientY/window.innerHeight)*2+1,u=performance.now(),p=Math.max(u-M.current,1),L=R-v.current.x,I=w-v.current.y;i.current.x=L/(p*.001),i.current.y=I/(p*.001),E.current.x=R,E.current.y=w,v.current={x:R,y:w},M.current=u};window.addEventListener("mousemove",ye);const we=()=>{requestAnimationFrame(we);const o=performance.now(),R=Math.min((o-M.current)*.001,.02);if(M.current=o,!T.current){const w=E.current.x*.1+Math.PI*.25,p=E.current.y*.05-Math.PI*.81+m.current.x,L=w+m.current.y,I=m.current.z;n.rotation.x+=(p-n.rotation.x)*.02,n.rotation.y+=(L-n.rotation.y)*.02,n.rotation.z+=(I-n.rotation.z)*.02,n.rotation.y+=.001}if(R>0){const I=i.current.y*2.5,W=-i.current.x*2.5,le=(i.current.x+i.current.y)*2.5*.4,F=-m.current.x*12,be=-m.current.y*12,Q=-m.current.z*12;y.current.x+=(I+F)*R,y.current.y+=(W+be)*R,y.current.z+=(le+Q)*R,y.current.x*=.88,y.current.y*=.88,y.current.z*=.88,m.current.x+=y.current.x*R,m.current.y+=y.current.y*R,m.current.z+=y.current.z*R,m.current.x=Math.max(-1.2,Math.min(1.2,m.current.x)),m.current.y=Math.max(-1.2,Math.min(1.2,m.current.y)),m.current.z=Math.max(-1.2,Math.min(1.2,m.current.z));const K=Math.sin(o*.001)*.05;n.position.set(0,K,0),i.current.x*=.92,i.current.y*=.92}n.children.forEach(w=>{if(w.material&&w.material.map&&w.material.map.image&&w.material.map.image.tagName==="VIDEO"){const u=w.material.map.image;!u.paused&&u.readyState>=2&&(w.material.map.needsUpdate=!0)}}),c.render(b,a)};ne.current&&setTimeout(()=>{ne.current()},100);const Pe=Z.registerResources("HeroCube",{renderer:c,scene:b,geometry:xe,materials:ce,textures:ce.map(o=>o.map).filter(Boolean)},{persistent:!0});return we(),()=>{f.current&&f.current.kill(),O&&c.domElement&&O.removeChild(c.domElement),window.removeEventListener("mousemove",ye),window.removeEventListener("resize",G),Z.cleanup(Pe)}},[A,D,d]),h.jsx("div",{className:"relative",children:h.jsx("div",{ref:r,className:"fixed inset-0 w-full h-full overflow-hidden",style:{pointerEvents:"none",zIndex:5,filter:"drop-shadow(0 0 30px rgba(16, 185, 129, 0.3)) drop-shadow(0 0 80px rgba(0, 255, 136, 0.2))"}})})};Me.propTypes={enableOpeningAnimation:g.bool,onAnimationComplete:g.func,onReady:g.func};function _(...d){return d.filter(Boolean).join(" ").trim()}const de=({children:d,content:e,placement:t="top",className:r,delay:s=300,...f})=>{const[E,i]=l.useState(!1),[v,y]=l.useState(t),m=l.useRef(null),M=l.useRef(null),T=l.useRef(null),j=()=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{i(!0)},s)},q=()=>{T.current&&clearTimeout(T.current),i(!1)};l.useEffect(()=>{if(E){const $=()=>{if(!m.current||!M.current)return;const C=m.current.getBoundingClientRect(),N=M.current.getBoundingClientRect(),D={width:window.innerWidth,height:window.innerHeight};let S=t;const A={top:C.top-N.height-8,bottom:C.bottom+8,left:C.left-N.width-8,right:C.right+8};switch(t){case"top":A.top<0&&(S="bottom");break;case"bottom":A.bottom+N.height>D.height&&(S="top");break;case"left":A.left<0&&(S="right");break;case"right":A.right+N.width>D.width&&(S="left");break}if(S==="left"||S==="right"){const B=C.top+C.height/2;(B-N.height/2<0||B+N.height/2>D.height)&&(S=A.top>=0?"top":"bottom")}y(S)};requestAnimationFrame(()=>{$()})}},[E,e,t]),l.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]);const V=()=>{const $="absolute z-[9999] px-3 py-2 text-xs font-medium transition-all duration-200 transform",C="bg-black/90 text-theme-primary border border-theme-primary/30 rounded-lg backdrop-blur-sm",N="shadow-lg shadow-theme-primary/20",D=E?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-95 pointer-events-none";let S="";switch(v){case"top":S="bottom-full left-1/2 -translate-x-1/2 mb-2";break;case"bottom":S="top-full left-1/2 -translate-x-1/2 mt-2";break;case"left":S="right-full top-1/2 -translate-y-1/2 mr-2";break;case"right":S="left-full top-1/2 -translate-y-1/2 ml-2";break}return _($,C,N,D,S,r)},U=()=>{const $="absolute w-2 h-2 bg-black/90 border border-theme-primary/30 transform rotate-45";let C="";switch(v){case"top":C="top-full left-1/2 -translate-x-1/2 -mt-1 border-t-0 border-l-0";break;case"bottom":C="bottom-full left-1/2 -translate-x-1/2 -mb-1 border-b-0 border-r-0";break;case"left":C="left-full top-1/2 -translate-y-1/2 -ml-1 border-l-0 border-b-0";break;case"right":C="right-full top-1/2 -translate-y-1/2 -mr-1 border-r-0 border-t-0";break}return _($,C)};return h.jsxs("div",{className:"relative inline-block",ref:m,onMouseEnter:j,onMouseLeave:q,...f,children:[d,h.jsxs("div",{ref:M,className:V(),style:{maxWidth:"200px",whiteSpace:"nowrap",zIndex:9999},children:[e,h.jsx("div",{className:U()})]})]})};de.propTypes={children:g.node.isRequired,content:g.node.isRequired,placement:g.oneOf(["top","bottom","left","right"]),className:g.string,delay:g.number};const Ae=({children:d,className:e,level:t=1,...r})=>{const s="text-theme-text-primary transition-colors duration-300",f={1:"text-4xl font-bold",2:"text-3xl font-semibold",3:"text-2xl font-medium",4:"text-xl font-medium",5:"text-lg font-medium",6:"text-base font-medium"},E=`h${t}`;return h.jsx(E,{className:_(s,f[t],e),...r,children:d})},ke=({children:d,className:e,...t})=>h.jsx("p",{className:_("text-theme-text-secondary text-lg transition-colors duration-300",e),...t,children:d}),Ge=({children:d,className:e,...t})=>h.jsx("p",{className:_("text-theme-text-muted transition-colors duration-300",e),...t,children:d});Ae.propTypes={children:g.node.isRequired,className:g.string,level:g.oneOf([1,2,3,4,5,6])};ke.propTypes={children:g.node.isRequired,className:g.string};Ge.propTypes={children:g.node.isRequired,className:g.string};g.node.isRequired,g.string,g.bool;g.node.isRequired,g.string,g.oneOf(["primary","secondary","outline","ghost"]),g.oneOf(["sm","md","lg"]);g.node.isRequired,g.string;g.string,g.bool;g.node.isRequired,g.string;const Ie=({language:d,enableOpeningAnimation:e=!1})=>{const{getNewContent:t,toggleLanguage:r}=me(),s=t(),{toggleTheme:f,getCurrentTheme:E}=ze(),i=E(),[v,y]=l.useState(!1),[m,M]=l.useState(!1),[T,j]=l.useState(!1),[q,V]=l.useState(!1);l.useEffect(()=>{const $=setTimeout(()=>{j(!0)},400),C=setTimeout(()=>{M(!0)},600),N=setTimeout(()=>{y(!0)},2e3);return()=>{clearTimeout($),clearTimeout(C),clearTimeout(N)}},[]);const U=l.useCallback(()=>{V(!0),j(!1)},[]);return h.jsxs("div",{className:"w-screen overflow-hidden",style:{margin:0,padding:0,background:"transparent",height:"100vh",minHeight:"100dvh"},children:[h.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 text-center text-white z-50 w-full px-4",children:h.jsxs("div",{className:"flex flex-col items-center justify-center w-full relative",children:[h.jsx(Ae,{level:1,className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold font-beauRivage mb-2 sm:mb-4 leading-tight text-center w-full mt-12",style:{visibility:"visible",opacity:1,transform:"none",filter:"none",transition:"none"},children:s.home.name[d]||s.home.name.en}),h.jsx(ke,{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-mono text-theme-accent mt-48",style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"max-content",whiteSpace:"nowrap",visibility:"visible",opacity:1,transition:"none"},children:s.home.title[d]||s.home.title.en})]})}),h.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 text-center z-50 w-full px-4",style:{bottom:"max(4rem, env(safe-area-inset-bottom) + 3rem)",visibility:"visible",opacity:1,transition:"none"},children:h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light text-theme-primary tracking-wider leading-relaxed",children:s.home.slogan[d]||s.home.slogan.en})})}),T&&!q&&h.jsx(Ye,{size:160,strokeWidth:12,showMask:!0}),m&&h.jsx(Me,{enableOpeningAnimation:e,onReady:U}),v&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"max(1.5rem, env(safe-area-inset-left) + 1rem)"},children:h.jsx(de,{content:d==="en"?"English":"‰∏≠Êñá",placement:"top",delay:200,children:h.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${s.ui.language[d]||s.ui.language.en}: ${d==="en"?"English":"‰∏≠Êñá"}`,children:h.jsx(Ne,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),h.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",right:"max(1.5rem, env(safe-area-inset-right) + 1rem)"},children:h.jsx(de,{content:i.name[d]||i.name.en,placement:"left",delay:200,children:h.jsx("button",{onClick:f,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${s.ui.toggleTheme[d]||s.ui.toggleTheme.en}: ${i.name[d]||i.name.en}`,children:h.jsx(je,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),h.jsx("div",{className:`absolute z-50 transition-opacity duration-1000 md:hidden ${v?"opacity-100":"opacity-0"}`,style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"50%",transform:"translateX(-50%)"},children:h.jsx("p",{className:"text-white/70 text-sm font-medium whitespace-nowrap animate-pulse",children:s.ui.mobileScrollHint[d]||s.ui.mobileScrollHint.en})})]})]})};Ie.propTypes={language:g.string.isRequired,enableOpeningAnimation:g.bool};const tt=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{tt as H,Ae as T,ke as a,Ge as b,ze as u,Z as w};
