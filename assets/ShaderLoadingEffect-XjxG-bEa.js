import{r,j as d}from"./react-DAuysMQ2.js";import{P as m}from"./vendor-DC1nlNB_.js";import{g as p}from"./gsap-DjKJqAo0.js";import"./leaflet-B1_H9jHX.js";const E=({imageSrc:h,hoverImageSrc:w})=>{const i=r.useRef(null),l=r.useRef(null),[v,g]=r.useState(!1),[c,x]=r.useState(1),a=r.useRef(null),u=r.useRef([]);r.useEffect(()=>(a.current=new Worker(new URL("/assets/particleWorker-B56nW3BT.js",import.meta.url)),a.current.onmessage=e=>{const t=e.data;t.forEach(s=>{p.to(s,{duration:s.speed,x1:s.x0,y1:s.y0,delay:s.y0/130,ease:"elastic.out"})}),u.current=t},()=>{a.current.terminate()}),[]),r.useEffect(()=>{const e=new Image;e.onload=()=>{const t=i.current;t.width=e.width*2,t.height=e.height*2,x(e.width/e.height);const s=new OffscreenCanvas(e.width,e.height);s.getContext("2d").drawImage(e,0,0);const o=s.transferToImageBitmap();a.current.postMessage({imageBitmap:o,width:e.width,height:e.height},[o])},e.src=h},[h]),r.useEffect(()=>{const e=i.current,t=e.getContext("2d",{willReadFrequently:!0}),s=()=>{t.clearRect(0,0,e.width,e.height),u.current.forEach(n=>{t.fillStyle=n.color,t.fillRect(n.x1*2,n.y1*2,2,2)}),requestAnimationFrame(s)};requestAnimationFrame(s)},[u]),r.useEffect(()=>{const e=()=>{const t=i.current;if(!t)return;const s=t.parentElement.clientWidth,n=t.parentElement.clientHeight;let o,f;s/n>c?(f=n,o=f*c):(o=s,f=o/c),t.style.width=`${o}px`,t.style.height=`${f}px`};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[c]);const y=()=>{g(!0),p.fromTo(l.current,{opacity:0},{opacity:1,scale:1,duration:.8,ease:"elastic.in"});const e=new Image;e.onload=()=>{const t=new OffscreenCanvas(e.width,e.height);t.getContext("2d").drawImage(e,0,0);const n=t.transferToImageBitmap();a.current.postMessage({imageBitmap:n,width:e.width,height:e.height},[n])},e.src=h},R=()=>{p.to(l.current,{opacity:0,duration:.8,ease:"elastic.out",onComplete:()=>g(!1)})};return d.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},onMouseEnter:y,onMouseLeave:R,children:[d.jsx("canvas",{ref:i,style:{width:"100%",height:"100%",cursor:"pointer",objectFit:"cover",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -30%) scale(1.5)"}}),d.jsx("img",{ref:l,src:w,alt:"Hover Image",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",opacity:0,visibility:v?"visible":"hidden",transition:"opacity 0.8s ease, transform 0.8s ease",pointerEvents:"none"}})]})};E.propTypes={imageSrc:m.string.isRequired,hoverImageSrc:m.string.isRequired};export{E as default};
