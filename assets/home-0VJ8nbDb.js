import{r as u,j as p,F as Le,a as Pe}from"./react-N-_5-tx-.js";import{l as ye,P as B}from"./vendor-RxfllKF0.js";import{u as le}from"./about-Cl6B1UiQ.js";import{h as je,i as $e,W as Ne,N as we,k as be,A as Oe,v as se,P as ve,w as De,p as ae,F as Re,s as Ee,x as Be,q as ie,D as He,M as Fe,E as Ve,y as Ue,z as We,V as Ge,r as Ye}from"./three-Br820KFa.js";import{g as Xe}from"./gsap-CH_iu5NA.js";import{t as Ce}from"./texture-system-DH-WFgNI.js";import{C as qe}from"./gallery-ixlw5wGO.js";class Ze{constructor(){this.activeResources=new Map,this.resourceCounter=0,this.isPageVisible=!document.hidden,this.lastActivityTime=Date.now(),this.initPageVisibilityListener(),this.initActivityListener()}initPageVisibilityListener(){typeof document<"u"&&document.addEventListener("visibilitychange",()=>{this.isPageVisible=!document.hidden,this.isPageVisible&&(this.refreshActiveResources(),this.lastActivityTime=Date.now())})}initActivityListener(){if(typeof document<"u"){const e=()=>{this.lastActivityTime=Date.now()};document.addEventListener("mousemove",e,{passive:!0}),document.addEventListener("mousedown",e,{passive:!0}),document.addEventListener("keydown",e,{passive:!0}),document.addEventListener("scroll",e,{passive:!0}),document.addEventListener("touchstart",e,{passive:!0})}}refreshActiveResources(){const e=Date.now();for(const[,t]of this.activeResources)t.persistent||(t.timestamp=e)}registerResources(e,t,n={}){const a=`${e}_${this.resourceCounter++}`;return this.activeResources.set(a,{componentId:e,resources:t,timestamp:Date.now(),persistent:n.persistent||!1}),a}cleanupByComponent(e){const t=[];for(const[n,a]of this.activeResources)a.componentId===e&&(this.disposeResources(a.resources),t.push(n));t.forEach(n=>this.activeResources.delete(n))}cleanup(e){const t=this.activeResources.get(e);t&&(this.disposeResources(t.resources),this.activeResources.delete(e))}disposeResources(e){e&&(e.renderer&&(e.renderer.dispose(),e.renderer.info&&e.renderer.info.reset()),e.scene&&this.disposeScene(e.scene),e.geometry&&(Array.isArray(e.geometry)?e.geometry.forEach(t=>t.dispose()):e.geometry.dispose()),e.materials&&(Array.isArray(e.materials)?e.materials.forEach(t=>this.disposeMaterial(t)):this.disposeMaterial(e.materials)),e.textures&&(Array.isArray(e.textures)?e.textures.forEach(t=>t.dispose()):e.textures.dispose()),e.gl&&e.gl.getExtension&&(e.buffers&&Object.values(e.buffers).forEach(t=>{t&&e.gl.deleteBuffer(t)}),e.programs&&Object.values(e.programs).forEach(t=>{t&&e.gl.deleteProgram(t)})))}disposeScene(e){if(e)for(e.traverse(t=>{t.geometry&&t.geometry.dispose(),t.material&&this.disposeMaterial(t.material),t.texture&&t.texture.dispose()});e.children.length>0;)e.remove(e.children[0])}disposeMaterial(e){if(e){if(Array.isArray(e)){e.forEach(t=>this.disposeMaterial(t));return}Object.keys(e).forEach(t=>{const n=e[t];n&&typeof n.dispose=="function"&&(n.image&&n.image.tagName==="VIDEO"&&(n.image.pause(),n.image.src="",n.image.load()),n.dispose())}),e.dispose()}}forceCleanupAll(){console.warn("üö® Âº∫Âà∂Ê∏ÖÁêÜÊâÄÊúâWebGLËµÑÊ∫ê");for(const[,e]of this.activeResources)this.disposeResources(e.resources);this.activeResources.clear(),typeof window<"u"&&window.gc&&setTimeout(()=>window.gc(),100)}getMemoryInfo(){const t={activeResourceGroups:this.activeResources.size,timestamp:Date.now(),persistentResources:0,temporaryResources:0,sectionBreakdown:{}};for(const[n,a]of this.activeResources){a.persistent?t.persistentResources++:t.temporaryResources++;const f=a.componentId;t.sectionBreakdown[f]||(t.sectionBreakdown[f]={count:0,persistent:0,temporary:0,resourceIds:[],lastActive:a.timestamp}),t.sectionBreakdown[f].count++,t.sectionBreakdown[f].resourceIds.push(n),t.sectionBreakdown[f].lastActive=Math.max(t.sectionBreakdown[f].lastActive,a.timestamp),a.persistent?t.sectionBreakdown[f].persistent++:t.sectionBreakdown[f].temporary++}return typeof window<"u"&&window.performance&&window.performance.memory&&(t.jsHeapSize=Math.round(window.performance.memory.usedJSHeapSize/1024/1024),t.jsHeapLimit=Math.round(window.performance.memory.totalJSHeapSize/1024/1024)),t.resourceStats=this.getResourceTypeStats(),t}getResourceTypeStats(){const e={renderers:0,scenes:0,geometries:0,materials:0,textures:0,webglContexts:0,canvas2dContexts:0};for(const[,t]of this.activeResources){const n=t.resources;n.renderer&&e.renderers++,n.scene&&e.scenes++,n.gl&&e.webglContexts++,n.context2d&&e.canvas2dContexts++,n.geometry&&(e.geometries+=Array.isArray(n.geometry)?n.geometry.length:1),n.materials&&(e.materials+=Array.isArray(n.materials)?n.materials.length:1),n.textures&&(e.textures+=Array.isArray(n.textures)?n.textures.length:1)}return e}cleanupOldResources(e=3e5){if(this.isPageVisible||this.hasRecentActivity())return;const t=Date.now(),n=[];for(const[a,f]of this.activeResources){if(f.persistent)continue;const E=f.componentId&&f.componentId.includes("BackgroundCanvas")?18e5:e;t-f.timestamp>E&&(this.disposeResources(f.resources),n.push(a))}n.forEach(a=>this.activeResources.delete(a))}hasRecentActivity(){return typeof window<"u"?Date.now()-(this.lastActivityTime||0)<3e5:!1}getDebugInfo(){const e=Date.now(),t=[];for(const[n,a]of this.activeResources)t.push({id:n,componentId:a.componentId,persistent:a.persistent,age:Math.round((e-a.timestamp)/1e3),isBackgroundCanvas:a.componentId&&a.componentId.includes("BackgroundCanvas")});return{totalResources:this.activeResources.size,isPageVisible:this.isPageVisible,hasRecentActivity:this.hasRecentActivity(),lastActivityAge:Math.round((e-(this.lastActivityTime||0))/1e3),resources:t}}cleanupOtherSections(e,t=[]){if(!e)return;const n=new Set([e,...t]),a=[];let f=0;for(const[E,i]of this.activeResources)i.persistent||n.has(i.componentId)||(this.disposeResources(i.resources),a.push(E),f++);return a.forEach(E=>this.activeResources.delete(E)),f}}const Z=new Ze;typeof window<"u"&&setInterval(()=>{Z.cleanupOldResources()},3e5);const F={"nz-blue":{name:{en:"New Zealand Blue",zh:"Êñ∞Ë•øÂÖ∞Ëìù"},description:{en:"Inspired by New Zealand's coastal beauty",zh:"ÁÅµÊÑüÊù•Ëá™Êñ∞Ë•øÂÖ∞Êµ∑Â≤∏‰πãÁæé"},icon:"üá≥üáø",colors:{primary:"#00ffff",secondary:"#0080ff",accent:"#4dd0e1",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1e7ef","text-muted":"#888888",border:"#00ffff",divider:"#00ffff",hover:"rgba(0, 255, 255, 0.1)",button:"rgba(0, 255, 255, 0.6)",loading:"#00ffff",glow:"#00ffff",shadow:"rgba(0, 255, 255, 0.5)",cursor:"#00ffff","avatar-glow":"#00ffff",success:"#00ff00",warning:"#ffff00",error:"#ff0000","gradient-from":"#0080ff","gradient-via":"#00ffff","gradient-to":"#4dd0e1"}},"si-green":{name:{en:"South Island Green",zh:"ÁªøÊÑèÂçóÂ≤õ"},description:{en:"Inspired by South Island's lush landscapes",zh:"ÁÅµÊÑüÊù•Ëá™ÂçóÂ≤õÁöÑËåÇÂØÜÊôØËßÇ"},icon:"üèîÔ∏è",colors:{primary:"#10b981",secondary:"#059669",accent:"#4ade80",background:"#000000",surface:"rgba(255, 255, 255, 0.05)","surface-elevated":"rgba(255, 255, 255, 0.1)","text-primary":"#ffffff","text-secondary":"#e1f5fe","text-muted":"#888888",border:"#10b981",divider:"#10b981",hover:"rgba(16, 185, 129, 0.1)",button:"rgba(16, 185, 129, 0.6)",loading:"#10b981",glow:"#10b981",shadow:"rgba(16, 185, 129, 0.5)",cursor:"#10b981","avatar-glow":"#10b981",success:"#10b981",warning:"#ffff00",error:"#ff0000","gradient-from":"#059669","gradient-via":"#10b981","gradient-to":"#4ade80"}}},Te=()=>{const{theme:x,setTheme:e}=le(),t=i=>{const v=F[i];if(!v)return;const g=document.documentElement;Object.entries(v.colors).forEach(([m,S])=>{if(g.style.setProperty(`--theme-${m}`,S),m==="primary"||m==="secondary"){const R=n(S);R&&g.style.setProperty(`--theme-${m}-rgb`,`${R.r}, ${R.g}, ${R.b}`)}}),g.className=g.className.replace(/theme-\w+/g,""),g.classList.add(`theme-${i}`),e(i)},n=i=>{const v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null},a=()=>{const i=Object.keys(F),g=(i.indexOf(x)+1)%i.length;t(i[g])},f=()=>F[x]||F["nz-blue"],E=()=>Object.entries(F).map(([i,v])=>({key:i,...v}));return u.useEffect(()=>{const i=F[x]?x:"nz-blue";if(i!==x){e(i);return}const v=F[i];if(!v)return;const g=document.documentElement;Object.entries(v.colors).forEach(([m,S])=>{if(g.style.setProperty(`--theme-${m}`,S),m==="primary"||m==="secondary"){const R=n(S);R&&g.style.setProperty(`--theme-${m}-rgb`,`${R.r}, ${R.g}, ${R.b}`)}}),g.className=g.className.replace(/theme-\w+/g,""),g.classList.add(`theme-${i}`)},[x,e]),{theme:x,applyTheme:t,toggleTheme:a,getCurrentTheme:f,getAllThemes:E,getThemeColors:()=>f().colors,themes:F}},Se=({enableOpeningAnimation:x=!1,onAnimationComplete:e,onReady:t})=>{const n=u.useRef(),a=u.useRef(),f=u.useRef(),E=u.useRef({x:0,y:0}),i=u.useRef({x:0,y:0}),v=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0,z:0}),m=u.useRef({x:0,y:0,z:0}),S=u.useRef(performance.now()),R=u.useRef(!1),D=u.useRef(null),{getContent:Y}=le(),j=Y(),{getThemeColors:X}=Te(),$=X(),C=u.useCallback(()=>Math.max(window.innerWidth,window.innerHeight),[]),[I,H]=u.useState(!1),y=u.useMemo(()=>{var O,w,c,l,P,V;return[{name:"home",label:((O=j.navigation)==null?void 0:O.home)||"Home",color:"#afcc8f",effect:"effectchaos",video:"/cube-textures/home.mp4"},{name:"about",label:((w=j.navigation)==null?void 0:w.about)||"About",color:"#7ca65c",effect:"effectlorenz",texture:"about"},{name:"projects",label:((c=j.navigation)==null?void 0:c.projects)||"Projects",color:"#5d7d4b",effect:"effectmonjori",texture:"projects"},{name:"gallery",label:((l=j.navigation)==null?void 0:l.gallery)||"Gallery",color:"#768e90",effect:"effectheartbeats",texture:"gallery"},{name:"education",label:((P=j.navigation)==null?void 0:P.education)||"Education",color:"#4a636a",effect:"effectfuse",texture:"education"},{name:"contact",label:((V=j.navigation)==null?void 0:V.contact)||"Contact",color:"#3a4e55",effect:"effectpixeldistortion",texture:"contact"}]},[j.navigation]);u.useEffect(()=>{(async()=>{try{console.log("üöÄ ÂºÄÂßãHero CubeÁ∫πÁêÜÈ¢ÑÂä†ËΩΩ...");const w=await Ce.loadHeroCubeTextures(y);console.log("‚úÖ Hero CubeÁ∫πÁêÜÂä†ËΩΩÂÆåÊàê!"),console.log(`  - ÂõæÁâáÁ∫πÁêÜ: ${w.textures.size}`),console.log(`  - ËßÜÈ¢ëÁ∫πÁêÜ: ${w.videos.size}`),console.log(`  - ÈîôËØØÊï∞Èáè: ${w.errors.length}`),w.errors.length>0&&console.warn("‚ö†Ô∏è ÈÉ®ÂàÜÁ∫πÁêÜÂä†ËΩΩÂ§±Ë¥•:",w.errors),D.current=w,console.log("üîç Ë∞ÉËØïÈ¢ÑÂä†ËΩΩÁªìÊûú:"),console.log("  - Á∫πÁêÜMapÈîÆ:",Array.from(w.textures.keys())),console.log("  - ËßÜÈ¢ëMapÈîÆ:",Array.from(w.videos.keys())),console.log("  - facesÈÖçÁΩÆ:",y.map(c=>({name:c.name,hasVideo:!!c.video,hasTexture:!!c.texture}))),H(!0)}catch(w){console.warn("Á∫πÁêÜÈ¢ÑÂä†ËΩΩÈÉ®ÂàÜÂ§±Ë¥•ÔºåÁªßÁª≠Ê∏≤Êüì:",w),H(!0)}})()},[y]),u.useEffect(()=>{const O=()=>{var P;if((P=n.current)!=null&&P.firstChild){const V=n.current.firstChild;V.style.width="100vw",V.style.height="100vh"}},w=()=>{Z.isPageVisible&&Z.refreshActiveResources()},c=["mousedown","mousemove","keydown","scroll","touchstart"];window.addEventListener("resize",O);const l=ye.debounce(w,3e4);return c.forEach(P=>{document.addEventListener(P,l)}),()=>{window.removeEventListener("resize",O),c.forEach(P=>{document.removeEventListener(P,l)})}},[C]);const N=u.useRef($),W=u.useRef(e),K=u.useRef(t);return u.useEffect(()=>{N.current=$},[$]),u.useEffect(()=>{W.current=e},[e]),u.useEffect(()=>{K.current=t},[t]),u.useEffect(()=>{if(!I)return;const O=n.current;if(!O)return;const w=new je,c=new $e(50,1,.1,1e3);c.position.z=10;const l=new Ne({alpha:!0,antialias:!0,powerPreference:"high-performance",precision:"mediump",stencil:!1,depth:!0,premultipliedAlpha:!1});l.setClearColor(0,0),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,1.5)),l.shadowMap.enabled=!1,l.physicallyCorrectLights=!1,l.toneMapping=we,l.setPixelRatio(Math.min(window.devicePixelRatio,1.5)),l.domElement.style.position="fixed",l.domElement.style.top="0",l.domElement.style.left="0",l.domElement.style.width="100vw",l.domElement.style.height="100vh",l.domElement.style.display="block",l.domElement.style.zIndex="10",l.domElement.style.pointerEvents="none",l.domElement.setAttribute("data-no-custom-cursor","true"),l.domElement.setAttribute("data-hero-cube-canvas","true"),l.domElement.classList.add("hero-cube-canvas"),l.setSize(window.innerWidth,window.innerHeight),c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),l.shadowMap.enabled=!1,l.physicallyCorrectLights=!1,l.toneMapping=we,l.toneMappingExposure=1,l.outputColorSpace=be,O.appendChild(l.domElement);const P=ye.debounce(()=>{if(l&&c){const o=window.innerWidth,b=window.innerHeight;l.setSize(o,b),c.aspect=o/b,c.updateProjectionMatrix()}},100);window.addEventListener("resize",P);const V=new Oe(16777215,.8);w.add(V);const ee=new se(16777215,1.2);ee.position.set(5,5,5),ee.castShadow=!0,w.add(ee);const ue=new se(1096065,.6);ue.position.set(-5,2,-3),w.add(ue);const de=new se(3462041,.5);de.position.set(3,-4,5),w.add(de);const me=new ve(14742240,1.5,15);me.position.set(0,0,8),w.add(me);const fe=new ve(65416,.8,20);fe.position.set(0,0,-10),w.add(fe);const te=2.8,oe=new De(te,te,te,8,.1),pe=(o=256)=>{const b=document.createElement("canvas");b.width=o,b.height=o;const s=b.getContext("2d"),d=o/8;for(let A=0;A<8;A++)for(let z=0;z<8;z++)s.fillStyle=(A+z)%2===0?N.current.surface:N.current.muted,s.fillRect(A*d,z*d,d,d);s.fillStyle=N.current.primary,s.font=`bold ${o/16}px Arial`,s.textAlign="center",s.textBaseline="middle",s.fillText("VIDEO",o/2,o/2-o/32),s.fillText("ERROR",o/2,o/2+o/32);const L=new Ee(b);return L.needsUpdate=!0,L},re=[y.find(o=>o.name==="about"),y.find(o=>o.name==="gallery"),y.find(o=>o.name==="contact"),y.find(o=>o.name==="education"),y.find(o=>o.name==="home"),y.find(o=>o.name==="projects")].map(o=>{var J,Q;if(o.video){const G=pe(256),k=new ae({map:G,transparent:!0,opacity:.9,side:Re});if((J=D.current)!=null&&J.videos.has(o.name)){const h=D.current.videos.get(o.name);if(k.map=h,k.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ: ${o.name}`),h.image){const T=h.image;console.log(`üé¨ ËßÜÈ¢ëÁä∂ÊÄÅ: ${o.name}`,{paused:T.paused,currentTime:T.currentTime,duration:T.duration,readyState:T.readyState,networkState:T.networkState}),T.paused&&T.play().catch(q=>console.warn("ËßÜÈ¢ëËá™Âä®Êí≠ÊîæÂ§±Ë¥•:",q));const M=()=>{T.paused&&T.play().then(()=>{console.log(`üé¨ Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÂºÄÂßãÊí≠Êîæ: ${o.name}`),document.removeEventListener("click",M),document.removeEventListener("touchstart",M)}).catch(q=>console.warn("Áî®Êà∑‰∫§‰∫íÂêéËßÜÈ¢ëÊí≠ÊîæÂ§±Ë¥•:",q))};T.paused&&(document.addEventListener("click",M,{once:!0}),document.addEventListener("touchstart",M,{once:!0}))}}else{console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩËßÜÈ¢ëÁ∫πÁêÜ‰∏çÂèØÁî®ÔºåÂàõÂª∫Êñ∞ÁöÑ: ${o.name}`);const h=document.createElement("video");h.src=o.video,h.crossOrigin="anonymous",h.loop=!0,h.muted=!0,h.autoplay=!0,h.playsInline=!0,h.preload="metadata";const T=()=>{try{const M=new Ge(h);M.minFilter=ie,M.magFilter=ie,M.format=Ye,M.generateMipmaps=!1,M.flipY=!0,M.colorSpace=be,k.map&&k.map!==G&&k.map.dispose(),k.map=M,k.needsUpdate=!0,h.play().catch(q=>{console.warn("Video autoplay failed:",q)})}catch(M){console.warn("Failed to create video texture:",M)}};h.addEventListener("loadeddata",()=>{T()}),h.addEventListener("canplay",()=>{T()}),h.addEventListener("loadedmetadata",()=>{h.play().catch(()=>{})}),h.addEventListener("error",M=>{console.warn("Video loading error, using fallback texture:",M)}),h.load()}return k}if(o.texture){const G=pe(256),k=new ae({map:G,transparent:!0,opacity:.9,side:Re});if((Q=D.current)!=null&&Q.textures.has(o.texture)){const h=D.current.textures.get(o.texture);o.texture==="education"&&(h.flipY=!0,h.needsUpdate=!0,console.log(`üîÑ ‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),k.map=h,k.needsUpdate=!0,console.log(`‚úÖ ‰ΩøÁî®È¢ÑÂä†ËΩΩÁ∫πÁêÜ: ${o.texture}`)}else console.warn(`‚ö†Ô∏è È¢ÑÂä†ËΩΩÁ∫πÁêÜ‰∏çÂèØÁî®Ôºå‰ΩøÁî®Áªü‰∏ÄÁ≥ªÁªüÂºÇÊ≠•Âä†ËΩΩ: ${o.texture}`),(async()=>{try{const h=await Ce.loadSceneTextures("hero-cube",{textures:[o.texture]});if(h.textures.has(o.texture)){const T=h.textures.get(o.texture);o.texture==="education"&&(T.flipY=!0,T.needsUpdate=!0,console.log(`üîÑ ÂºÇÊ≠•Âä†ËΩΩÊó∂‰∏∫${o.texture}Á∫πÁêÜÂêØÁî®YËΩ¥ÁøªËΩ¨`)),k.map=T,k.needsUpdate=!0,console.log(`‚úÖ ÂçïÁã¨Âä†ËΩΩCubeÁ∫πÁêÜÊàêÂäü: ${o.texture}`)}else throw new Error(`Á∫πÁêÜÊú™ÊâæÂà∞: ${o.texture}`)}catch(h){console.warn(`Âä†ËΩΩÁ∫πÁêÜÂ§±Ë¥•: ${o.texture}`,h)}})();return k}const b=document.createElement("canvas"),s=256;b.width=s,b.height=s;const d=b.getContext("2d");d.clearRect(0,0,s,s);const L=d.createRadialGradient(s/2,s/2,0,s/2,s/2,s/2);L.addColorStop(0,`${o.color}25`),L.addColorStop(.6,`${o.color}15`),L.addColorStop(1,`${o.color}08`),d.fillStyle=L,d.fillRect(0,0,s,s),d.strokeStyle=`${o.color}60`,d.lineWidth=2;const A=s*.05;d.strokeRect(A,A,s-A*2,s-A*2);const z=d.createLinearGradient(0,0,s,s);z.addColorStop(0,"rgba(255, 255, 255, 0.15)"),z.addColorStop(.5,"rgba(255, 255, 255, 0.08)"),z.addColorStop(1,"rgba(255, 255, 255, 0)"),d.fillStyle=z,d.fillRect(0,0,s/3,s),d.shadowColor="rgba(0, 0, 0, 0.8)",d.shadowBlur=6;const ne=36;d.font=`bold ${ne}px "Helvetica Neue", Arial`,d.fillStyle=N.current.text||"#ffffff",d.textAlign="center",d.textBaseline="middle",d.fillText(o.label,s/2,s/2),d.shadowColor="transparent",d.shadowBlur=0,d.shadowOffsetX=0,d.shadowOffsetY=0;const U=new Ee(b);return U.needsUpdate=!0,U.generateMipmaps=!0,U.minFilter=Be,U.magFilter=ie,new ae({map:U,transparent:!0,opacity:.9,side:He})}),r=new Fe(oe,re);w.add(r),a.current=r;const ze=new Ve(oe),Ae=new Ue({color:16777215,opacity:.3,transparent:!0,linewidth:2}),ke=new We(ze,Ae);r.add(ke),x?(r.position.set(0,0,-80),r.scale.set(.05,.05,.05),r.rotation.set(0,0,0),f.current=Xe.timeline({onComplete:()=>{W.current&&W.current(),window.dispatchEvent(new CustomEvent("cubeAnimationComplete"))}}).to(r.position,{z:0,duration:2,ease:"power3.out",delay:.5}).to(r.scale,{x:1.5,y:1.5,z:1.5,duration:2,ease:"back.out(1.7)"},.5).to(r.rotation,{x:0,y:0,z:0,duration:1.5,ease:"power2.inOut"},2.5).to(c.position,{x:0,y:0,z:4,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},3.2).to(r.rotation,{x:0,y:-Math.PI*.5,z:0,duration:1.5,ease:"power2.inOut"},4.5).to(c.position,{x:4,y:0,z:0,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},5.3).to(r.rotation,{x:0,y:-Math.PI,z:0,duration:1.5,ease:"power2.inOut"},6.5).to(c.position,{x:0,y:0,z:-4,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},7.3).to(r.rotation,{x:0,y:Math.PI*.5,z:0,duration:1.5,ease:"power2.inOut"},8.5).to(c.position,{x:-4,y:0,z:0,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},9.3).to(r.rotation,{x:Math.PI*.5,y:Math.PI*.5,z:0,duration:1.5,ease:"power2.inOut"},10.5).to(c.position,{x:0,y:-4,z:0,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},11.3).to(r.rotation,{x:-Math.PI*.5,y:Math.PI*.5,z:0,duration:1.5,ease:"power2.inOut"},12.5).to(c.position,{x:0,y:4,z:0,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},13.3).to(c.position,{x:0,y:2,z:6,duration:.7,ease:"power2.inOut",onUpdate:()=>c.lookAt(r.position)},13.3).to(c.position,{x:0,y:0,z:10,duration:.8,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},14).to(r.scale,{x:3,y:3,z:3,duration:1.7,ease:"power3.in"},14.8).to(c.position,{z:2,duration:1.7,ease:"power3.in",onUpdate:()=>c.lookAt(r.position)},14.8).to(r.rotation,{x:r.rotation.x+Math.PI*4,y:r.rotation.y+Math.PI*6,z:r.rotation.z+Math.PI*3,duration:1.7,ease:"power2.out"},14.8).to(r.scale,{x:1.2,y:1.2,z:1.2,duration:2.5,ease:"power3.out"},16.5).to(c.position,{z:10,duration:2.5,ease:"power2.out",onUpdate:()=>c.lookAt(r.position)},16.5).to(r.rotation,{x:r.rotation.x+Math.PI*1.5,y:r.rotation.y+Math.PI*1.8,z:r.rotation.z+Math.PI*1.2,duration:2.5,ease:"sine.inOut"},16.5).to(r.scale,{x:1.05,y:1.05,z:1.05,duration:2,ease:"power2.out"},19).to(r.rotation,{x:-Math.PI*.81,y:Math.PI*.25,z:0,duration:2,ease:"power1.inOut"},19).to(r.scale,{x:1,y:1,z:1,duration:.4,ease:"power2.out"},21).to(r.scale,{x:1.08,y:1.08,z:1.08,duration:.15,ease:"power2.out"},21.4).to(r.scale,{x:1,y:1,z:1,duration:.2,ease:"bounce.out"},21.55).to(r.scale,{x:1.06,y:1.06,z:1.06,duration:.12,ease:"power2.out"},21.8).to(r.scale,{x:1,y:1,z:1,duration:.18,ease:"bounce.out"},21.92).to(r.scale,{x:1.04,y:1.04,z:1.04,duration:.1,ease:"power2.out"},22.15).to(r.scale,{x:1,y:1,z:1,duration:.25,ease:"elastic.out(1.2, 0.4)"},22.25)):r.rotation.set(-Math.PI*.81,Math.PI*.25,0);const he=o=>{const b=o.clientX/window.innerWidth*2-1,s=-(o.clientY/window.innerHeight)*2+1,d=performance.now(),L=Math.max(d-S.current,1),A=b-v.current.x,z=s-v.current.y;i.current.x=A/(L*.001),i.current.y=z/(L*.001),E.current.x=b,E.current.y=s,v.current={x:b,y:s},S.current=d};window.addEventListener("mousemove",he);const ge=()=>{requestAnimationFrame(ge);const o=performance.now(),b=Math.min((o-S.current)*.001,.02);if(S.current=o,!R.current){const s=E.current.x*.1+Math.PI*.25,L=E.current.y*.05-Math.PI*.81+m.current.x,A=s+m.current.y,z=m.current.z;r.rotation.x+=(L-r.rotation.x)*.02,r.rotation.y+=(A-r.rotation.y)*.02,r.rotation.z+=(z-r.rotation.z)*.02,r.rotation.y+=.001}if(b>0){const z=i.current.y*2.5,ne=-i.current.x*2.5,U=(i.current.x+i.current.y)*2.5*.4,xe=-m.current.x*12,J=-m.current.y*12,Q=-m.current.z*12;g.current.x+=(z+xe)*b,g.current.y+=(ne+J)*b,g.current.z+=(U+Q)*b,g.current.x*=.88,g.current.y*=.88,g.current.z*=.88,m.current.x+=g.current.x*b,m.current.y+=g.current.y*b,m.current.z+=g.current.z*b,m.current.x=Math.max(-1.2,Math.min(1.2,m.current.x)),m.current.y=Math.max(-1.2,Math.min(1.2,m.current.y)),m.current.z=Math.max(-1.2,Math.min(1.2,m.current.z));const G=Math.sin(o*.001)*.05;r.position.set(0,G,0),i.current.x*=.92,i.current.y*=.92}r.children.forEach(s=>{if(s.material&&s.material.map&&s.material.map.image&&s.material.map.image.tagName==="VIDEO"){const d=s.material.map.image;!d.paused&&d.readyState>=2&&(s.material.map.needsUpdate=!0)}}),l.render(w,c)};K.current&&setTimeout(()=>{K.current()},100);const Ie=Z.registerResources("HeroCube",{renderer:l,scene:w,geometry:oe,materials:re,textures:re.map(o=>o.map).filter(Boolean)},{persistent:!0});return ge(),()=>{f.current&&f.current.kill(),O&&l.domElement&&O.removeChild(l.domElement),window.removeEventListener("mousemove",he),window.removeEventListener("resize",P),Z.cleanup(Ie)}},[y,I,x]),p.jsx("div",{className:"relative",children:p.jsx("div",{ref:n,className:"fixed inset-0 w-full h-full overflow-hidden",style:{pointerEvents:"none",zIndex:5,filter:"drop-shadow(0 0 20px rgba(16, 185, 129, 0.3)) drop-shadow(0 0 40px rgba(0, 255, 136, 0.2))"}})})};Se.propTypes={enableOpeningAnimation:B.bool,onAnimationComplete:B.func,onReady:B.func};function _(...x){return x.filter(Boolean).join(" ").trim()}const ce=({children:x,content:e,placement:t="top",className:n,delay:a=300,...f})=>{const[E,i]=u.useState(!1),[v,g]=u.useState(t),m=u.useRef(null),S=u.useRef(null),R=u.useRef(null),D=()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{i(!0)},a)},Y=()=>{R.current&&clearTimeout(R.current),i(!1)};u.useEffect(()=>{if(E){const $=()=>{if(!m.current||!S.current)return;const C=m.current.getBoundingClientRect(),I=S.current.getBoundingClientRect(),H={width:window.innerWidth,height:window.innerHeight};let y=t;const N={top:C.top-I.height-8,bottom:C.bottom+8,left:C.left-I.width-8,right:C.right+8};switch(t){case"top":N.top<0&&(y="bottom");break;case"bottom":N.bottom+I.height>H.height&&(y="top");break;case"left":N.left<0&&(y="right");break;case"right":N.right+I.width>H.width&&(y="left");break}if(y==="left"||y==="right"){const W=C.top+C.height/2;(W-I.height/2<0||W+I.height/2>H.height)&&(y=N.top>=0?"top":"bottom")}g(y)};requestAnimationFrame(()=>{$()})}},[E,e,t]),u.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]);const j=()=>{const $="absolute z-[9999] px-3 py-2 text-xs font-medium transition-all duration-200 transform",C="bg-black/90 text-theme-primary border border-theme-primary/30 rounded-lg backdrop-blur-sm",I="shadow-lg shadow-theme-primary/20",H=E?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-95 pointer-events-none";let y="";switch(v){case"top":y="bottom-full left-1/2 -translate-x-1/2 mb-2";break;case"bottom":y="top-full left-1/2 -translate-x-1/2 mt-2";break;case"left":y="right-full top-1/2 -translate-y-1/2 mr-2";break;case"right":y="left-full top-1/2 -translate-y-1/2 ml-2";break}return _($,C,I,H,y,n)},X=()=>{const $="absolute w-2 h-2 bg-black/90 border border-theme-primary/30 transform rotate-45";let C="";switch(v){case"top":C="top-full left-1/2 -translate-x-1/2 -mt-1 border-t-0 border-l-0";break;case"bottom":C="bottom-full left-1/2 -translate-x-1/2 -mb-1 border-b-0 border-r-0";break;case"left":C="left-full top-1/2 -translate-y-1/2 -ml-1 border-l-0 border-b-0";break;case"right":C="right-full top-1/2 -translate-y-1/2 -mr-1 border-r-0 border-t-0";break}return _($,C)};return p.jsxs("div",{className:"relative inline-block",ref:m,onMouseEnter:D,onMouseLeave:Y,...f,children:[x,p.jsxs("div",{ref:S,className:j(),style:{maxWidth:"200px",whiteSpace:"nowrap",zIndex:9999},children:[e,p.jsx("div",{className:X()})]})]})};ce.propTypes={children:B.node.isRequired,content:B.node.isRequired,placement:B.oneOf(["top","bottom","left","right"]),className:B.string,delay:B.number};const _e=({children:x,className:e,level:t=1,...n})=>{const a="text-theme-text-primary transition-colors duration-300",f={1:"text-4xl font-bold",2:"text-3xl font-semibold",3:"text-2xl font-medium",4:"text-xl font-medium",5:"text-lg font-medium",6:"text-base font-medium"},E=`h${t}`;return p.jsx(E,{className:_(a,f[t],e),...n,children:x})},Je=({children:x,className:e,...t})=>p.jsx("p",{className:_("text-theme-text-secondary text-lg transition-colors duration-300",e),...t,children:x}),st=({children:x,className:e,...t})=>p.jsx("p",{className:_("text-theme-text-muted transition-colors duration-300",e),...t,children:x}),Me=({language:x,enableOpeningAnimation:e=!1})=>{const{getContent:t,toggleLanguage:n}=le(),a=t(),{toggleTheme:f,getCurrentTheme:E}=Te(),i=E(),[v,g]=u.useState(!1),[m,S]=u.useState(!1),[R,D]=u.useState(!1),[Y,j]=u.useState(!1);u.useEffect(()=>{const $=setTimeout(()=>{D(!0)},400),C=setTimeout(()=>{S(!0)},600),I=setTimeout(()=>{g(!0)},2e3);return()=>{clearTimeout($),clearTimeout(C),clearTimeout(I)}},[]);const X=u.useCallback(()=>{j(!0),D(!1)},[]);return p.jsxs("div",{className:"w-screen overflow-hidden",style:{margin:0,padding:0,background:"transparent",height:"100vh",minHeight:"100dvh"},children:[p.jsx("div",{className:`absolute top-8 left-1/2 transform -translate-x-1/2 text-center text-white z-50 w-full px-4 ${e?"grand-title-entrance":""}`,style:e?{}:{animation:"movieTitleEntrance 4s ease-out forwards 1s",animationFillMode:"both"},children:p.jsxs("div",{className:"flex flex-col items-center justify-center w-full relative",children:[p.jsx(_e,{level:1,className:`text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold font-beauRivage hover:text-theme-primary transition-colors duration-300 mb-2 sm:mb-4 leading-tight text-center w-full mt-12 ${e?"shimmer-text":""}`,children:a.home.name}),p.jsx(Je,{className:`text-lg sm:text-xl md:text-2xl lg:text-3xl font-mono text-theme-accent mt-48 ${e?"grand-subtitle-entrance":""}`,style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"max-content",whiteSpace:"nowrap"},children:a.home.title})]})}),p.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 text-center z-50 w-full px-4 ${e?"grand-slogan-entrance":""}`,style:{bottom:"max(4rem, env(safe-area-inset-bottom) + 3rem)",...e?{}:{animation:"sloganEntrance 3s ease-out forwards 5s",animationFillMode:"both"}},children:p.jsx("div",{className:"text-center",children:p.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light text-theme-primary tracking-wider leading-relaxed transition-colors duration-300",children:a.home.slogan})})}),R&&!Y&&p.jsx(qe,{size:160,strokeWidth:12,showMask:!0}),m&&p.jsx(Se,{enableOpeningAnimation:e,onReady:X}),v&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"max(1.5rem, env(safe-area-inset-left) + 1rem)"},children:p.jsx(ce,{content:x==="en"?"English":"‰∏≠Êñá",placement:"top",delay:200,children:p.jsx("button",{onClick:n,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${a.ui.language}: ${x==="en"?"English":"‰∏≠Êñá"}`,children:p.jsx(Le,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),p.jsx("div",{className:"absolute z-50 transition-opacity duration-1000 opacity-100",style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",right:"max(1.5rem, env(safe-area-inset-right) + 1rem)"},children:p.jsx(ce,{content:i.name[x]||i.name.en,placement:"left",delay:200,children:p.jsx("button",{onClick:f,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 group hover:scale-110",title:`${a.ui.toggleTheme}: ${i.name[x]||i.name.en}`,children:p.jsx(Pe,{className:"text-theme-primary text-xl group-hover:rotate-180 transition-transform duration-300"})})})}),p.jsx("div",{className:`absolute z-50 transition-opacity duration-1000 md:hidden ${v?"opacity-100":"opacity-0"}`,style:{bottom:"max(1.5rem, env(safe-area-inset-bottom) + 1rem)",left:"50%",transform:"translateX(-50%)"},children:p.jsx("p",{className:"text-white/70 text-sm font-medium whitespace-nowrap animate-pulse",children:a.ui.mobileScrollHint})})]})]})};Me.propTypes={language:B.string.isRequired,enableOpeningAnimation:B.bool};const at=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));export{at as H,_e as T,Je as a,st as b,Te as u,Z as w};
