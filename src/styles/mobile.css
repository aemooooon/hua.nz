/* ================================================ */
/* 移动端专用样式优化                                  */
/* ================================================ */

/* 移动端专用媒体查询 */
@media (max-width: 768px) {
    /* 触摸优化 */
    * {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }
    
    /* 允许文本选择的元素 */
    p, span, div[class*="text"], .selectable {
        -webkit-user-select: text;
        user-select: text;
    }
    
    /* 按钮和交互元素的触摸优化 */
    button, a, [role="button"] {
        min-height: 44px; /* Apple推荐的最小触摸目标尺寸 */
        min-width: 44px;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        cursor: pointer;
    }
    
    /* 移动端容器安全区域适配 */
    .mobile-container {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
    }
    
    /* 移动端全屏容器 */
    .mobile-fullscreen {
        height: 100vh;
        height: 100dvh;
        width: 100vw;
        width: 100dvw;
    }
    
    /* 移动端底部安全区域 */
    .mobile-bottom-content {
        padding-bottom: max(1rem, env(safe-area-inset-bottom) + 1rem);
        margin-bottom: env(safe-area-inset-bottom);
    }
    
    /* 移动端顶部安全区域 */
    .mobile-top-content {
        padding-top: max(1rem, env(safe-area-inset-top) + 1rem);
        margin-top: env(safe-area-inset-top);
    }
    
    /* 移动端固定定位元素 */
    .mobile-fixed-bottom {
        position: fixed;
        bottom: max(1rem, env(safe-area-inset-bottom) + 0.5rem);
        z-index: 1000;
    }
    
    .mobile-fixed-top {
        position: fixed;
        top: max(1rem, env(safe-area-inset-top) + 0.5rem);
        z-index: 1000;
    }
    
    /* 移动端滚动优化 */
    .mobile-scroll {
        -webkit-overflow-scrolling: touch;
        overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
    
    /* 首页特殊处理 */
    .home-section {
        height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
        height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }
    
    /* 首页标语位置调整 */
    .home-slogan {
        bottom: max(4rem, env(safe-area-inset-bottom) + 3rem);
    }
    
    /* 首页控制按钮位置调整 */
    .home-controls {
        bottom: max(1.5rem, env(safe-area-inset-bottom) + 1rem);
    }
    
    .home-controls.left {
        left: max(1.5rem, env(safe-area-inset-left) + 1rem);
    }
    
    .home-controls.right {
        right: max(1.5rem, env(safe-area-inset-right) + 1rem);
    }
}

/* 超小屏幕优化 (小于360px) */
@media (max-width: 360px) {
    .home-slogan {
        bottom: max(3rem, env(safe-area-inset-bottom) + 2rem);
        font-size: 0.875rem; /* 14px */
    }
    
    .home-controls button {
        width: 2.5rem; /* 40px */
        height: 2.5rem; /* 40px */
    }
    
    .home-controls {
        bottom: max(1rem, env(safe-area-inset-bottom) + 0.5rem);
    }
}

/* iOS特殊优化 */
@supports (-webkit-appearance: none) {
    /* iOS Safari地址栏适配 */
    .ios-viewport-fix {
        height: 100vh;
        height: -webkit-fill-available;
    }
    
    /* iOS弹性滚动 */
    .ios-scroll {
        -webkit-overflow-scrolling: touch;
    }
}

/* 横屏模式优化 */
@media (max-width: 768px) and (orientation: landscape) {
    .home-slogan {
        bottom: max(2rem, env(safe-area-inset-bottom) + 1rem);
        font-size: 0.875rem; /* 更小的字体适应横屏 */
    }
    
    .home-controls {
        bottom: max(1rem, env(safe-area-inset-bottom) + 0.5rem);
    }
    
    .home-controls button {
        width: 2.5rem;
        height: 2.5rem;
    }
}

/* Android特殊处理 */
@media (max-width: 768px) {
    /* Android Chrome地址栏适配 */
    .android-container {
        height: calc(100vh - 56px); /* Android Chrome地址栏高度 */
        height: calc(100dvh - env(keyboard-inset-height, 0px));
    }
}

/* PWA模式检测 */
@media (display-mode: standalone) {
    /* PWA全屏模式时的调整 */
    .pwa-container {
        height: 100vh;
        height: 100dvh;
    }
}
